import{a as M}from"./chunk-DCALQDKE.js";import{b as C}from"./chunk-WQRK5NAT.js";import{b as D}from"./chunk-CQOJENEW.js";import{a as I}from"./chunk-OOHQEE5L.js";import"./chunk-S7DFJDHE.js";import"./chunk-ZH6D4JNL.js";import"./chunk-LV7JVZMU.js";import"./chunk-4WY6IZPL.js";import{e as q}from"./chunk-WDDFHKIH.js";import{b as x}from"./chunk-NZNLV7ZF.js";import{b as S}from"./chunk-AGVKSH7H.js";import{q as v}from"./chunk-V2NMUT4R.js";import{a as g}from"./chunk-KEBJO4LJ.js";import{e as _}from"./chunk-PEYIU4ER.js";import"./chunk-RJZ3H7D5.js";import"./chunk-5YI4S6VK.js";import{f as y}from"./chunk-PXM2JOVS.js";import{x as d}from"./chunk-27E65EIB.js";import{b,d as f}from"./chunk-67M3DXMG.js";import{n as h}from"./chunk-FYJ5Y7AH.js";import{Ra as a,Rb as p,Sb as m,ba as l,hb as u,sb as c}from"./chunk-PSXZOWGB.js";import"./chunk-PSFXZ2QL.js";var G=(()=>{class i{constructor(t,e,r,s,o,n){this.route=t,this.router=e,this.validationService=r,this.ngxSpinnerService=s,this.motorRequestsService=o,this.messageService=n,this.formFields=[],this.isEditMode=!1,this.editData=null,this.motorRequestId=null,this.motorInsurances=[],this.motorInsuranceOptions=[],this.carTypes=[],this.carTypeOptions=[],this.carBrands=[],this.carBrandOptions=[],this.carModels=[],this.carModelOptions=[],this.carYears=[],this.carYearOptions=[],this.extraFormData={}}ngOnInit(){this.motorRequestId=this.route.snapshot.paramMap.get("id"),this.isEditMode=!!this.motorRequestId,this.route.data.subscribe({next:t=>{t?.data&&(this.motorInsurances=t.data.motorInsurances?.data||[],this.carTypes=t.data.carTypes?.data||[],this.carBrands=t.data.carBrands?.data||[],this.carModels=t.data.carModels?.data||[],this.isEditMode&&t.data.motorRequest&&(this.editData=t.data.motorRequest.data,this.editData?.motor_insurance_id&&(this.editData.motor_insurance_id=Number(this.editData.motor_insurance_id)),this.editData&&(this.extraFormData={user_id:this.editData.user_id})),this.motorInsuranceOptions=this.motorInsurances.map(e=>({label:`${e.company_name} - ${e.en_title}`,value:e.id.toString()})),this.carTypeOptions=this.carTypes.map(e=>({label:e.en_title,value:e.id.toString()})),this.carBrandOptions=this.carBrands.map(e=>({label:e.en_title,value:e.id.toString()})),this.carModelOptions=this.carModels.map(e=>({label:e.en_title,value:e.id.toString()})),this.initializeFields(),this.ngxSpinnerService.hide("actionsLoader"))},error:t=>{console.error("Failed to load data",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load required data"}),this.ngxSpinnerService.hide("actionsLoader")},complete:()=>{this.ngxSpinnerService.hide("actionsLoader")}})}initializeFields(){let t=["requested","pending","confirmed","canceled"],e=this.isEditMode&&this.editData?this.editData.active_status:null,r=e?t.indexOf(e):-1,s=[{label:"Requested",value:"requested"},{label:"Pending",value:"pending"},{label:"Confirmed",value:"confirmed"},{label:"Canceled",value:"canceled"}].filter(o=>{let n=t.indexOf(o.value);return e==="confirmed"&&o.value==="canceled"?!1:!this.isEditMode||r===-1||n>=r});this.formFields=[{name:"admin_motor_insurance_number",label:"Admin Motor Insurance Number",type:"text",required:!0,placeholder:"Enter Admin Motor Insurance Number"},{name:"start_date",label:"Start Date",type:"date",required:!0,placeholder:"Select Start Date",showIf:{filed:"active_status",value:"confirmed"}},{name:"duration",label:"Duration (Years)",type:"dropdown",required:!0,placeholder:"Enter Duration in Years",showIf:{filed:"active_status",value:"confirmed"}},{name:"end_date",label:"End Date",type:"date",required:!0,placeholder:"Select End Date"},{name:"active_status",label:"Status",type:"dropdown",required:!0,options:s,placeholder:"Select Status"},{name:"motor_insurance_id",label:"Motor Insurance",type:"dropdown",required:!0,options:this.motorInsuranceOptions,placeholder:"Select Motor Insurance",disabled:!0},{name:"payment_method",label:"Payment Method",type:"text",required:!0,placeholder:"Select Payment Method",disabled:!0},{name:"name",label:"Name",type:"text",required:!0,placeholder:"Enter Name",disabled:!0},{name:"email",label:"Email",type:"text",required:!0,placeholder:"Enter Email",disabled:!0},{name:"phone",label:"Phone",type:"text",required:!0,placeholder:"Enter Phone Number",disabled:!0},{name:"motor_insurance_number",label:"Motor Insurance Number",type:"text",required:!0,disabled:!0,placeholder:"Enter Motor Insurance Number"},{name:"car_type",label:"Car Type",type:"text",required:!0,placeholder:"Select Car Type",disabled:!0},{name:"car_brand",label:"Car Brand",type:"text",required:!0,placeholder:"Select Car Brand",disabled:!0},{name:"car_model",label:"Car Model",type:"text",required:!0,disabled:!0,placeholder:"Select Car Model"},{name:"car_year",label:"Car Year",type:"text",required:!0,disabled:!0,placeholder:"Select Car Year"},{name:"car_price",label:"Car Price",type:"text",required:!0,disabled:!0,placeholder:"Enter Car Price"}]}static{this.\u0275fac=function(e){return new(e||i)(a(b),a(f),a(I),a(g),a(M),a(d))}}static{this.\u0275cmp=l({type:i,selectors:[["app-add-edit-motor-requests"]],standalone:!0,features:[p([d]),m],decls:1,vars:9,consts:[[3,"fields","entityType","title","redirectRoute","isEdit","editData","extraFormData","category","changeStatus"]],template:function(e,r){e&1&&c(0,"app-generic-form",0),e&2&&u("fields",r.formFields)("entityType","motor-requests")("title",r.isEditMode?"Edit Motor Request":"Add Motor Request")("redirectRoute","/dashboard/menu/motor-requests")("isEdit",r.isEditMode)("editData",r.editData)("extraFormData",r.extraFormData)("category","motor")("changeStatus",!0)},dependencies:[h,v,q,S,C,x,y,_,D],styles:["[_nghost-%COMP%]     .p-dropdown{width:100%;height:50px;background:#fff;border-radius:12px;padding:0 20px;color:#1f2937;transition:all .2s ease;border:1px solid rgba(0,0,0,.285)}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{font-size:16px;color:#6b7280;margin-top:1px}[_nghost-%COMP%]     .p-dropdown-trigger{background:transparent;border:none;position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#6b7280}[_nghost-%COMP%]     .p-calendar{width:100%}[_nghost-%COMP%]     .p-calendar .p-inputtext{width:100%;height:50px;border-radius:12px;padding:0 20px;color:#1f2937;transition:all .2s ease;border:1px solid rgba(0,0,0,.285);font-size:16px}[_nghost-%COMP%]     .p-calendar .p-inputtext::placeholder{color:#6b7280}[_nghost-%COMP%]     .p-calendar .p-datepicker-trigger{background:transparent;border:none;position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#6b7280}"]})}}return i})();export{G as AddEditMotorsRequestsComponent};
