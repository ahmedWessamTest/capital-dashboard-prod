import{a as B}from"./chunk-4IMXXL2Z.js";import{b as le}from"./chunk-WQRK5NAT.js";import{d as ee,e as te}from"./chunk-WDDFHKIH.js";import{b as X}from"./chunk-NZNLV7ZF.js";import{a as Q,b as W}from"./chunk-AGVKSH7H.js";import{b as G,c as _,e as L,f as V,k as U,m as K,n as O,o as $,q as z}from"./chunk-V2NMUT4R.js";import{a as j,c as R}from"./chunk-KEBJO4LJ.js";import{d as Y,e as Z}from"./chunk-PEYIU4ER.js";import"./chunk-RJZ3H7D5.js";import"./chunk-5YI4S6VK.js";import{e as H,f as J}from"./chunk-PXM2JOVS.js";import{x as T}from"./chunk-27E65EIB.js";import{d as P}from"./chunk-67M3DXMG.js";import{h as D,n as k}from"./chunk-FYJ5Y7AH.js";import{Ab as x,Kb as m,Qa as r,Rb as q,Sb as I,Ub as v,Y as g,ba as N,fb as d,hb as p,jb as M,mb as s,qb as o,rb as l,sb as u,zb as w}from"./chunk-PSXZOWGB.js";import"./chunk-PSFXZ2QL.js";var A=t=>({"ng-invalid ng-dirty":t}),oe=t=>({"cursor-disabled-drop":t});function ie(t,c){t&1&&(o(0,"small",10),m(1,"Name is required."),l())}function ne(t,c){t&1&&m(0," Phone must be 11 digits. ")}function re(t,c){if(t&1&&(o(0,"small",10),d(1,ne,1,0),l()),t&2){let i,n=x();r(),s(1,!((i=n.employeeForm.get("phone"))==null||i.errors==null)&&i.errors.pattern?1:-1)}}function me(t,c){t&1&&(o(0,"small",17),m(1,"Role is required."),l())}function ae(t,c){t&1&&m(0," Email is required. ")}function de(t,c){t&1&&m(0," Please enter a valid email. ")}function pe(t,c){if(t&1&&(o(0,"small",10),d(1,ae,1,0)(2,de,1,0),l()),t&2){let i,n=x();r(),s(1,!((i=n.employeeForm.get("email"))==null||i.errors==null)&&i.errors.required?1:!((i=n.employeeForm.get("email"))==null||i.errors==null)&&i.errors.email?2:-1)}}var Ie=(()=>{class t{constructor(){this.isSubmitting=!1,this.roles=[{label:"User",value:"user"},{label:"Admin",value:"admin"},{label:"Employee",value:"employee"}],this.fb=g($),this.router=g(P),this.ngxSpinnerService=g(j),this.messageService=g(T),this.userService=g(B),this.employeeForm=this.fb.group({name:["",_.required],email:["",[_.required,_.email]],en_job:[""],ar_job:[""],phone:["",[_.pattern("^\\d{11}$")]],en_text:[""],ar_text:[""],role:["",_.required]})}onSubmit(){if(this.employeeForm.invalid){this.employeeForm.markAllAsTouched();return}this.isSubmitting=!0,this.ngxSpinnerService.show("actionsLoader");let i=this.employeeForm.value;this.userService.create(i).subscribe({next:n=>{this.messageService.add({severity:"success",summary:"Success",detail:"Employee added successfully"}),this.isSubmitting=!1,this.ngxSpinnerService.hide("actionsLoader"),this.router.navigate(["/dashboard/menu/all-employees"])},error:n=>{let e="Failed to add Employee";if(n.error?.errors){let a=Object.keys(n.error.errors)[0];e=n.error.errors[a]?.[0]||e}this.messageService.add({severity:"error",summary:"Error",detail:e}),this.isSubmitting=!1,this.ngxSpinnerService.hide("actionsLoader")}})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=N({type:t,selectors:[["app-add-employee"]],standalone:!0,features:[q([T]),I],decls:34,vars:26,consts:[[1,"card"],[1,"text-2xl","font-semibold","mb-4"],[1,"my-3"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","gap-4","mb-4"],[1,"p-4","border","rounded"],[1,"text-lg","font-medium","mb-4"],[1,"flex","flex-col","mb-3","h-20"],["for","name",1,"block","text-sm","font-medium","mb-1"],["id","name","type","text","pInputText","","formControlName","name",1,"w-full","h-10",3,"ngClass"],[1,"mt-1","text-red-500"],["for","phone",1,"block","text-sm","font-medium","mb-1"],["id","phone","type","text","pInputText","","formControlName","phone",1,"w-full","h-10",3,"ngClass"],[1,"form-control-container","flex-1"],["for","role",1,"flex","items-center","gap-1","mx-2","mb-2","font-semibold"],[1,"h-20"],["id","role","optionLabel","label","optionValue","value",1,"w-full",3,"ngClass","formControlName","options","placeholder","disabled"],[1,"text-red-500","form-error"],["for","email",1,"block","text-sm","font-medium","mb-1"],["id","email","type","email","pInputText","","formControlName","email",1,"w-full","h-10",3,"ngClass"],[1,"flex","justify-end"],["type","submit","label","Add Employee","icon","pi pi-check",1,"btn-main",3,"disabled"]],template:function(n,e){if(n&1&&(o(0,"div",0)(1,"h2",1),m(2,"Add Employee"),l(),o(3,"h3",2),m(4," Create employee Password is: capital-123456789 "),l(),o(5,"form",3),w("ngSubmit",function(){return e.onSubmit()}),o(6,"div",4)(7,"div",5)(8,"h3",6),m(9,"Basic Information"),l(),o(10,"div",7)(11,"label",8),m(12,"Name *"),l(),u(13,"input",9),d(14,ie,2,0,"small",10),l(),o(15,"div",7)(16,"label",11),m(17,"Phone"),l(),u(18,"input",12),d(19,re,2,1,"small",10),l(),o(20,"div",13)(21,"label",14),m(22,"Role *"),l(),o(23,"div",15),u(24,"p-dropdown",16),d(25,me,2,0,"small",17),l()(),o(26,"div",7)(27,"label",18),m(28,"Email *"),l(),u(29,"input",19),d(30,pe,3,1,"small",10),l()()(),o(31,"div",20),u(32,"p-button",21),l()()(),u(33,"p-toast")),n&2){let a,h,b,S,C,f,y,F,E;r(5),p("formGroup",e.employeeForm),r(8),p("ngClass",v(18,A,((a=e.employeeForm.get("name"))==null?null:a.touched)&&((a=e.employeeForm.get("name"))==null?null:a.invalid))),r(),s(14,(h=e.employeeForm.get("name"))!=null&&h.touched&&(!((h=e.employeeForm.get("name"))==null||h.errors==null)&&h.errors.required)?14:-1),r(4),p("ngClass",v(20,A,((b=e.employeeForm.get("phone"))==null?null:b.touched)&&((b=e.employeeForm.get("phone"))==null?null:b.invalid))),r(),s(19,(S=e.employeeForm.get("phone"))!=null&&S.touched&&((S=e.employeeForm.get("phone"))!=null&&S.errors)?19:-1),r(5),M("ng-dirty",((C=e.employeeForm.get("role"))==null?null:C.dirty)||((C=e.employeeForm.get("role"))==null?null:C.touched))("ng-invalid",((f=e.employeeForm.get("role"))==null?null:f.invalid)&&(((f=e.employeeForm.get("role"))==null?null:f.dirty)||((f=e.employeeForm.get("role"))==null?null:f.touched))),p("ngClass",v(22,oe,e.isSubmitting))("formControlName","role")("options",e.roles)("placeholder","Select Role")("disabled",e.isSubmitting),r(),s(25,(y=e.employeeForm.get("role"))!=null&&y.invalid&&((y=e.employeeForm.get("role"))!=null&&y.dirty||(y=e.employeeForm.get("role"))!=null&&y.touched)?25:-1),r(4),p("ngClass",v(24,A,((F=e.employeeForm.get("email"))==null?null:F.touched)&&((F=e.employeeForm.get("email"))==null?null:F.invalid))),r(),s(30,(E=e.employeeForm.get("email"))!=null&&E.touched&&((E=e.employeeForm.get("email"))!=null&&E.errors)?30:-1),r(2),p("disabled",e.employeeForm.invalid||e.isSubmitting)}},dependencies:[z,U,G,L,V,K,O,J,H,W,Q,le,X,Z,Y,te,ee,k,D,R]})}}return t})();export{Ie as AddEmployeeComponent};
