import{a as O}from"./chunk-NH6Q3UB7.js";import{a as $,b as B,c as k,d as L}from"./chunk-2CYVADF6.js";import"./chunk-ULFGH5XU.js";import{a as Q}from"./chunk-Y6SZKX5H.js";import"./chunk-4WY6IZPL.js";import{e as V}from"./chunk-WDDFHKIH.js";import"./chunk-AGVKSH7H.js";import{p as P,q as R}from"./chunk-V2NMUT4R.js";import{a as A}from"./chunk-KEBJO4LJ.js";import{d as F,e as j}from"./chunk-PEYIU4ER.js";import"./chunk-RJZ3H7D5.js";import"./chunk-5YI4S6VK.js";import{d as M,f as D}from"./chunk-PXM2JOVS.js";import{C as I}from"./chunk-27E65EIB.js";import{d as T}from"./chunk-67M3DXMG.js";import{n as q}from"./chunk-FYJ5Y7AH.js";import{Ab as x,Gb as v,Hb as N,Ib as w,Kb as a,Lb as d,Qa as c,Sb as E,Y as u,ba as y,fb as b,hb as C,ka as _,la as g,qb as o,rb as r,sb as s,wb as S,zb as h}from"./chunk-PSXZOWGB.js";import"./chunk-PSFXZ2QL.js";var H=["dt"];function Y(l,f){l&1&&(o(0,"tr")(1,"th",8),a(2," User Id "),s(3,"p-sortIcon",9),r(),o(4,"th",10),a(5," User Name "),s(6,"p-sortIcon",11),r(),o(7,"th",12),a(8," Request Id "),s(9,"p-sortIcon",13),r(),o(10,"th",14),a(11," Request Type "),s(12,"p-sortIcon",15),r(),o(13,"th",16),a(14," Category"),s(15,"p-sortIcon",17),r(),o(16,"th",18),a(17," Expiry Date "),s(18,"p-sortIcon",19),r(),o(19,"th",20),a(20,"Actions"),r()())}function z(l,f){if(l&1){let e=S();o(0,"tr")(1,"td",20),a(2),r(),o(3,"td",20),a(4),r(),o(5,"td",20),a(6),r(),o(7,"td",20),a(8),r(),o(9,"td",20),a(10),r(),o(11,"td",20),a(12),r(),o(13,"td",20)(14,"div",21)(15,"button",22),h("click",function(){let i=_(e).$implicit,n=x();return g(n.viewExpiryNotification(i.category_id,i.id,i.req_type))}),r()()()()}if(l&2){let e=f.$implicit,t=x();c(2),d(e==null?null:e.user_id),c(2),d(e==null?null:e.user_name),c(2),d(e==null?null:e.req_id),c(2),d(e==null?null:e.req_type),c(2),d(t.getCategoryLabel(e==null?null:e.category_name)),c(2),d(t.formatDateTime(e.comment_date))}}function G(l,f){l&1&&(o(0,"tr")(1,"td",23)(2,"div")(3,"div",24),s(4,"app-no-data-found-banner"),r()()()())}var ue=(()=>{class l{constructor(){this.ngxSpinnerService=u(A),this.router=u(T),this.sendNotificationService=u(O),this.adminNotifications=this.sendNotificationService.adminNotifications,this.totalRecords=0,this.rowsPerPage=10}ngOnInit(){-this.sendNotificationService.markAllAsSeen(),this.totalRecords=this.adminNotifications().length}formatDateTime(e){if(!e)return"";let t=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear(),m=String(e.getHours()).padStart(2,"0"),p=String(e.getMinutes()).padStart(2,"0");return`${t}-${i}-${n} ${m}:${p}`}customSort(e){let{field:t,order:i}=e;t==="comment_date"?e.data.sort((n,m)=>{let p=n.comment_date?.getTime?.()??0,U=m.comment_date?.getTime?.()??0;return(p-U)*i}):t==="user_name"?e.data.sort((n,m)=>n.user_name.localeCompare(m.user_name)*i):t==="category_name"?e.data.sort((n,m)=>n.category_name.localeCompare(m.category_name)*i):t==="req_type"?e.data.sort((n,m)=>n.req_type.localeCompare(m.req_type)*i):t==="user_id"?e.data.sort((n,m)=>(n.user_id-m.user_id)*i):t==="req_id"&&e.data.sort((n,m)=>(n.req_id-m.req_id)*i)}getPagination(){let e=this.adminNotifications().length;return[10,25,50,100,e].filter(t=>t<=e)}viewExpiryNotification(e,t,i){e===1?this.router.navigate([i==="claim"?"/dashboard/menu/medical-claims/comments":"/dashboard/menu/medical-request/comments",t]):e===2?this.router.navigate([i==="claim"?"/dashboard/menu/motor-claims/comments":"/dashboard/menu/motor-requests/comments",t]):e===3?this.router.navigate([i==="claim"?"/dashboard/menu/building-claims/comments":"/dashboard/menu/building-request/comments",t]):e===5&&this.router.navigate([i==="claim"?"/dashboard/menu/jop-claims/comments":"/dashboard/menu/jop-request/comments",t])}getCategoryLabel(e){return{job:"professional",building:"property"}[e]||e}static{this.\u0275fac=function(t){return new(t||l)}}static{this.\u0275cmp=y({type:l,selectors:[["app-admin-notifications"]],viewQuery:function(t,i){if(t&1&&v(H,5),t&2){let n;N(n=w())&&(i.dt=n.first)}},standalone:!0,features:[E],decls:10,vars:7,consts:[["dt",""],[1,"card"],[1,"flex","justify-between","items-center","mb-3"],[1,"text-2xl","font-semibold"],["responsiveLayout","scroll",3,"sortFunction","paginator","rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","value","customSort"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","user_id",1,"text-center"],["field","user_id"],["pSortableColumn","user_name",1,"text-center"],["field","user_name"],["pSortableColumn","req_id",1,"text-center"],["field","req_id"],["pSortableColumn","req_type",1,"text-center"],["field","req_type"],["pSortableColumn","category_name",1,"text-center"],["field","category_name"],["pSortableColumn","comment_date",1,"text-center"],["field","comment_date"],[1,"text-center"],[1,"flex","justify-center","items-center"],["pButton","","icon","pi pi-comments",3,"click"],["colspan","6"],[1,"h-48","flex","justify-center","items-center","flex-col"]],template:function(t,i){if(t&1){let n=S();o(0,"div",1)(1,"div",2)(2,"h2",3),a(3,"Admin Notifications"),r()(),o(4,"p-table",4,0),h("sortFunction",function(p){return _(n),g(i.customSort(p))}),b(6,Y,21,0,"ng-template",5)(7,z,16,6,"ng-template",6)(8,G,5,0,"ng-template",7),r()(),s(9,"p-toast")}t&2&&(c(4),C("paginator",!0)("rows",i.rowsPerPage)("totalRecords",i.totalRecords)("rowsPerPageOptions",i.getPagination())("showCurrentPageReport",!0)("value",i.adminNotifications())("customSort",!0))},dependencies:[D,M,I,R,L,$,B,k,P,V,j,F,q,Q]})}}return l})();export{ue as AdminNotificationsComponent};
