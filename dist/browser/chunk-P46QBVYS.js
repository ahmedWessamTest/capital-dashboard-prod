import{a as Z}from"./chunk-LXZAHYRT.js";import{a as he,b as be}from"./chunk-WQRK5NAT.js";import{a as Y}from"./chunk-DCM55A5P.js";import{a as _e}from"./chunk-S7DFJDHE.js";import{a as pe}from"./chunk-ZH6D4JNL.js";import{a as ue,b as ce}from"./chunk-NZNLV7ZF.js";import{a as me,b as ge}from"./chunk-AGVKSH7H.js";import{b as ee,c as g,e as te,f as ie,k as ne,m as le,n as oe,o as ae,q as re}from"./chunk-V2NMUT4R.js";import{a as Q,b as W,c as X}from"./chunk-KEBJO4LJ.js";import{b as K}from"./chunk-RJZ3H7D5.js";import{e as se,f as de}from"./chunk-PXM2JOVS.js";import"./chunk-27E65EIB.js";import{b as $,d as H,e as J}from"./chunk-67M3DXMG.js";import{h as G,j as R,n as j}from"./chunk-FYJ5Y7AH.js";import{Ab as O,Kb as o,Lb as v,Qa as a,Ra as V,Rb as z,Sb as k,Tb as q,Ub as h,Vb as U,Y as f,ba as N,fb as u,gb as L,hb as s,mb as c,qb as t,rb as i,sb as _,zb as P}from"./chunk-PSXZOWGB.js";import"./chunk-PSFXZ2QL.js";var b=n=>({"p-invalid":n}),fe=()=>({language:"en",direction:"ltr",height:400}),ve=()=>["/dashboard/menu/en-blogs"],Se=(n,d)=>({"bg-green-100 border-green-400 text-green-700":n,"bg-red-100 border-red-400 text-red-700":d});function xe(n,d){n&1&&(t(0,"small",13),o(1,"English Blog Title is required"),i())}function Ce(n,d){n&1&&(t(0,"small",13),o(1,"English Blog Content is required"),i())}function Ee(n,d){n&1&&(t(0,"small",13),o(1,"English Meta Title is required"),i())}function Fe(n,d){n&1&&(t(0,"small",13),o(1,"English Meta Description is required"),i())}function Me(n,d){n&1&&(t(0,"small",13),o(1,"English First Script Text is required"),i())}function Ie(n,d){n&1&&(t(0,"small",13),o(1,"English Second Script Text is required"),i())}function ye(n,d){n&1&&(t(0,"small",13),o(1,"Blog Date is required"),i())}function Te(n,d){n&1&&(t(0,"small",13),o(1,"Selected date is in the past. Please choose today or a future date."),i())}function we(n,d){if(n&1&&(t(0,"div",8)(1,"label",36),o(2,"Blog Date"),i(),t(3,"div",10),_(4,"input",37),i(),t(5,"div",12),u(6,ye,2,0,"small",13)(7,Te,2,0,"small",13),i()()),n&2){let l,m,e,r=O();a(4),s("min",r.isEditMode?null:r.minDate)("ngClass",h(5,b,((l=r.blogForm.get("blog_date"))==null?null:l.touched)&&((l=r.blogForm.get("blog_date"))==null?null:l.invalid)))("disabled",r.isSubmitting),a(2),c(6,(m=r.blogForm.get("blog_date"))!=null&&m.touched&&((m=r.blogForm.get("blog_date"))!=null&&m.hasError("required"))?6:-1),a(),c(7,!r.isEditMode&&((e=r.blogForm.get("blog_date"))!=null&&e.touched)&&((e=r.blogForm.get("blog_date"))!=null&&e.hasError("pastDate"))?7:-1)}}function Ae(n,d){n&1&&(t(0,"small",13),o(1,"Status is required"),i())}function Be(n,d){n&1&&(t(0,"small",13),o(1,"Main Image is required"),i())}function Pe(n,d){if(n&1&&(t(0,"div",35)(1,"strong",38),o(2),i(),t(3,"span",39),o(4),i()()),n&2){let l=O();s("ngClass",U(3,Se,l.message.type==="success",l.message.type==="error")),a(2),v(l.message.type==="success"?"Success!":"Error!"),a(2),v(l.message.text)}}function Oe(n){let d=new Date(n.value),l=new Date;return l.setHours(0,0,0,0),d<l?{pastDate:!0}:null}var nt=(()=>{class n{constructor(l){this.NormalizeActiveStatusService=l,this.router=f(H),this.fb=f(ae),this.englishBlogsService=f(Z),this.ngxSpinnerService=f(Q),this.route=f($),this.isSubmitting=!1,this.addedImages=[],this.removedImages=[],this.isEditMode=!1,this.blogId=null,this.initialImages=[],this.IMAGE_BASE_URL=K,this.minDate=new Date().toISOString().split("T")[0],this.message={text:"",type:""}}ngOnInit(){this.ngxSpinnerService.show("actionsLoader"),this.initializeForm(),this.checkMode()}initializeForm(){this.blogForm=this.fb.group({en_blog_title:["",g.required],en_blog_text:["",g.required],en_meta_title:["",g.required],en_meta_text:["",g.required],en_first_script_text:["",g.required],en_second_script_text:["",g.required],blog_date:["",[g.required,Oe]],active_status:[!0,g.required],main_image:[null,g.required]}),this.blogForm.markAsPristine()}checkMode(){this.route.url.subscribe(l=>{this.isEditMode=l.some(m=>m.path.includes("edit")),this.isEditMode?(this.blogId=this.route.snapshot.paramMap.get("id"),this.blogId&&this.loadBlogData()):(this.initialImages=[],this.ngxSpinnerService.hide("actionsLoader"))})}loadBlogData(){this.route.data.subscribe({next:l=>{let e=l.data.data,r=new Date().toISOString();this.initialImages=e.main_image?[{id:`temp-${Date.now()}`,product_id:0,image:this.IMAGE_BASE_URL+e.main_image,thumb:this.IMAGE_BASE_URL+e.main_image,medium:this.IMAGE_BASE_URL+e.main_image,order_view:0,is_main:!0,active_status:!0,created_at:r,updated_at:r}]:[],this.blogForm.patchValue({en_blog_title:e.en_blog_title,en_blog_text:e.en_blog_text,en_meta_title:e.en_meta_title,en_meta_text:e.en_meta_text,en_first_script_text:e.en_first_script_text,en_second_script_text:e.en_second_script_text,blog_date:e.blog_date,active_status:this.NormalizeActiveStatusService.normalizeActiveStatus(e.active_status),main_image:e.main_image}),this.blogForm.get("blog_date")?.setValidators([g.required]),this.blogForm.get("blog_date")?.updateValueAndValidity(),this.blogForm.get("main_image")?.clearValidators(),this.blogForm.get("main_image")?.updateValueAndValidity(),this.ngxSpinnerService.hide("actionsLoader")},error:l=>{this.message={text:l.error?.message||"Failed to load blog data",type:"error"},window.scrollTo({top:0,behavior:"smooth"}),this.ngxSpinnerService.hide("actionsLoader"),setTimeout(()=>{this.message={text:"",type:""}},5e3)}})}onImagesChanged(l){if(this.addedImages=l.added,this.removedImages=l.removed,this.addedImages.length>0)this.blogForm.patchValue({main_image:this.addedImages[0]}),this.blogForm.get("main_image")?.setValidators([g.required]);else if(this.isEditMode&&this.initialImages.length>0&&this.removedImages.length===0){let m=this.initialImages[0].image.replace(this.IMAGE_BASE_URL,"");this.blogForm.patchValue({main_image:m}),this.blogForm.get("main_image")?.clearValidators()}else this.blogForm.patchValue({main_image:null}),this.blogForm.get("main_image")?.setValidators([g.required]);this.blogForm.get("main_image")?.updateValueAndValidity()}onActiveStatusChange(l){this.blogForm.patchValue({active_status:!!l.checked})}onSubmit(){if(this.blogForm.invalid){this.blogForm.markAllAsTouched(),window.scrollTo({top:0,behavior:"smooth"});return}this.isSubmitting=!0,this.blogForm.disable(),this.ngxSpinnerService.show("actionsLoader"),this.message={text:"",type:""};let l=this.blogForm.value;l.active_status=this.blogForm.value.active_status?"1":"0",(this.isEditMode&&this.blogId?this.englishBlogsService.update(+this.blogId,l):this.englishBlogsService.create(l)).subscribe({next:e=>{this.message={text:`Blog ${this.isEditMode?"Updated":"Added"} Successfully`,type:"success"},this.blogForm.reset(),this.blogForm.markAsPristine(),this.addedImages=[],this.removedImages=[],this.initialImages=[],this.isSubmitting=!1,this.blogForm.enable(),window.scrollTo({top:0,behavior:"smooth"}),this.ngxSpinnerService.hide("actionsLoader"),setTimeout(()=>{this.router.navigate(["/dashboard/menu/en-blogs"]),this.message={text:"",type:""}},1e3)},error:e=>{let r=e.error?.message||`Failed to ${this.isEditMode?"update":"create"} blog`;if(e.error?.errors){let p=Object.keys(e.error.errors);p.length>0&&(r=e.error.errors[p[0]][0])}this.message={text:r,type:"error"},this.isSubmitting=!1,this.blogForm.enable(),window.scrollTo({top:0,behavior:"smooth"}),this.ngxSpinnerService.hide("actionsLoader"),setTimeout(()=>{this.message={text:"",type:""}},5e3)}})}static{this.\u0275fac=function(m){return new(m||n)(V(Y))}}static{this.\u0275cmp=N({type:n,selectors:[["app-add-english-blog"]],standalone:!0,features:[z([]),k],decls:87,vars:51,consts:[["name","actionsLoader","bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","square-spin",3,"fullScreen"],[2,"color","white"],[1,"card"],[1,"card-title"],[1,"blog-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"section-title"],[1,"form-row"],[1,"form-field"],["for","en_blog_title",1,"field-label"],[1,"input-container"],["pInputText","","id","en_blog_title","formControlName","en_blog_title","placeholder","Enter English Blog Title",3,"ngClass","disabled"],[1,"error-container"],[1,"error-message"],["for","en_blog_text",1,"field-label"],["dir","ltr","formControlName","en_blog_text",1,"rich-text-content",3,"options","ngClass"],["for","en_meta_title",1,"field-label"],["pInputText","","id","en_meta_title","formControlName","en_meta_title","placeholder","Enter English Meta Title",3,"ngClass","disabled"],["for","en_meta_text",1,"field-label"],["pInputTextarea","","id","en_meta_text","formControlName","en_meta_text","rows","7","placeholder","Enter English Meta Description",3,"ngClass","disabled"],["for","en_first_script_text",1,"field-label"],["pInputTextarea","","id","en_first_script_text","formControlName","en_first_script_text","rows","7","placeholder","Enter English First Script Text",3,"ngClass","disabled"],["for","en_second_script_text",1,"field-label"],["pInputTextarea","","id","en_second_script_text","formControlName","en_second_script_text","rows","7","placeholder","Enter English Second Script Text",3,"ngClass","disabled"],[1,"form-row","flex","items-center"],["class","form-field",4,"ngIf"],["for","active_status",1,"field-label"],[1,"status-container"],["id","active_status","formControlName","active_status",3,"onChange","trueValue","falseValue","disabled"],[1,"status-label"],[1,"field-label"],[3,"imagesChanged","initialImages","singleImageMode","id"],[1,"flex","justify-between","items-center"],["type","button","label","Cancel","styleClass","p-button-text p-button-secondary",3,"routerLink","disabled"],["type","submit",1,"btn-main",3,"disabled"],["role","alert",1,"border","px-4","py-3","rounded","relative","mb-4",3,"ngClass"],["for","blog_date",1,"field-label"],["type","date","pInputText","","id","blog_date","formControlName","blog_date",3,"min","ngClass","disabled"],[1,"font-bold"],[1,"block","sm:inline","ml-2"]],template:function(m,e){if(m&1&&(t(0,"ngx-spinner",0)(1,"p",1),o(2,"Loading..."),i()(),t(3,"div",2)(4,"h2",3),o(5),i(),t(6,"form",4),P("ngSubmit",function(){return e.onSubmit()}),t(7,"div",5)(8,"h3",6),o(9,"Blog Title"),i(),t(10,"div",7)(11,"div",8)(12,"label",9),o(13,"English Blog Title"),i(),t(14,"div",10),_(15,"input",11),i(),t(16,"div",12),u(17,xe,2,0,"small",13),i()()()(),t(18,"div",5)(19,"h3",6),o(20,"Blog Content"),i(),t(21,"div",7)(22,"div",8)(23,"label",14),o(24,"English Blog Content"),i(),_(25,"ngx-jodit",15),t(26,"div",12),u(27,Ce,2,0,"small",13),i()()()(),t(28,"div",5)(29,"h3",6),o(30,"Meta Information"),i(),t(31,"div",7)(32,"div",8)(33,"label",16),o(34,"English Meta Title"),i(),t(35,"div",10),_(36,"input",17),i(),t(37,"div",12),u(38,Ee,2,0,"small",13),i()()(),t(39,"div",7)(40,"div",8)(41,"label",18),o(42,"English Meta Description"),i(),_(43,"textarea",19),t(44,"div",12),u(45,Fe,2,0,"small",13),i()()()(),t(46,"div",5)(47,"h3",6),o(48,"Script Text"),i(),t(49,"div",7)(50,"div",8)(51,"label",20),o(52,"English First Script Text"),i(),_(53,"textarea",21),t(54,"div",12),u(55,Me,2,0,"small",13),i()(),t(56,"div",8)(57,"label",22),o(58,"English Second Script Text"),i(),_(59,"textarea",23),t(60,"div",12),u(61,Ie,2,0,"small",13),i()()()(),t(62,"div",5)(63,"h3",6),o(64,"Additional Details"),i(),t(65,"div",24),u(66,we,8,7,"div",25),t(67,"div",8)(68,"label",26),o(69,"Status"),i(),t(70,"div",27)(71,"p-inputSwitch",28),P("onChange",function(p){return e.onActiveStatusChange(p)}),i(),t(72,"span",29),o(73),i()(),t(74,"div",12),u(75,Ae,2,0,"small",13),i()()(),t(76,"div",8)(77,"label",30),o(78,"Main Image"),i(),t(79,"app-image-upload",31),P("imagesChanged",function(p){return e.onImagesChanged(p)}),i(),t(80,"div",12),u(81,Be,2,0,"small",13),i()()(),t(82,"div",32),_(83,"p-button",33),t(84,"button",34),o(85),i()()()(),u(86,Pe,5,6,"div",35)),m&2){let r,p,S,x,C,E,F,M,I,y,T,w,D,A,B;s("fullScreen",!0),a(5),v(e.isEditMode?"Edit English Blog":"Add New English Blog"),a(),s("formGroup",e.blogForm),a(9),s("ngClass",h(37,b,((r=e.blogForm.get("en_blog_title"))==null?null:r.touched)&&((r=e.blogForm.get("en_blog_title"))==null?null:r.invalid)))("disabled",e.isSubmitting),a(2),c(17,(p=e.blogForm.get("en_blog_title"))!=null&&p.touched&&((p=e.blogForm.get("en_blog_title"))!=null&&p.hasError("required"))?17:-1),a(8),s("options",q(39,fe))("ngClass",h(40,b,((S=e.blogForm.get("en_blog_text"))==null?null:S.touched)&&((S=e.blogForm.get("en_blog_text"))==null?null:S.invalid))),L("disabled",e.isSubmitting?!0:null),a(2),c(27,(x=e.blogForm.get("en_blog_text"))!=null&&x.touched&&((x=e.blogForm.get("en_blog_text"))!=null&&x.hasError("required"))?27:-1),a(9),s("ngClass",h(42,b,((C=e.blogForm.get("en_meta_title"))==null?null:C.touched)&&((C=e.blogForm.get("en_meta_title"))==null?null:C.invalid)))("disabled",e.isSubmitting),a(2),c(38,(E=e.blogForm.get("en_meta_title"))!=null&&E.touched&&((E=e.blogForm.get("en_meta_title"))!=null&&E.hasError("required"))?38:-1),a(5),s("ngClass",h(44,b,((F=e.blogForm.get("en_meta_text"))==null?null:F.touched)&&((F=e.blogForm.get("en_meta_text"))==null?null:F.invalid)))("disabled",e.isSubmitting),a(2),c(45,(M=e.blogForm.get("en_meta_text"))!=null&&M.touched&&((M=e.blogForm.get("en_meta_text"))!=null&&M.hasError("required"))?45:-1),a(8),s("ngClass",h(46,b,((I=e.blogForm.get("en_first_script_text"))==null?null:I.touched)&&((I=e.blogForm.get("en_first_script_text"))==null?null:I.invalid)))("disabled",e.isSubmitting),a(2),c(55,(y=e.blogForm.get("en_first_script_text"))!=null&&y.touched&&((y=e.blogForm.get("en_first_script_text"))!=null&&y.hasError("required"))?55:-1),a(4),s("ngClass",h(48,b,((T=e.blogForm.get("en_second_script_text"))==null?null:T.touched)&&((T=e.blogForm.get("en_second_script_text"))==null?null:T.invalid)))("disabled",e.isSubmitting),a(2),c(61,(w=e.blogForm.get("en_second_script_text"))!=null&&w.touched&&((w=e.blogForm.get("en_second_script_text"))!=null&&w.hasError("required"))?61:-1),a(5),s("ngIf",!e.isEditMode),a(5),s("trueValue",!0)("falseValue",!1)("disabled",e.isSubmitting),a(2),v(((D=e.blogForm.get("active_status"))==null?null:D.value)===!0?"Active":"Inactive"),a(2),c(75,(A=e.blogForm.get("active_status"))!=null&&A.touched&&((A=e.blogForm.get("active_status"))!=null&&A.hasError("required"))?75:-1),a(4),s("initialImages",e.initialImages)("singleImageMode",!0)("id","main"),a(2),c(81,(B=e.blogForm.get("main_image"))!=null&&B.touched&&((B=e.blogForm.get("main_image"))!=null&&B.hasError("required"))?81:-1),a(2),s("routerLink",q(50,ve))("disabled",e.isSubmitting),a(),s("disabled",e.blogForm.invalid||e.isSubmitting),a(),v(e.isEditMode?e.isSubmitting?"Updating...":"Update Blog":e.isSubmitting?"Creating...":"Create Blog"),a(),c(86,e.message.text?86:-1)}},dependencies:[re,ne,ee,te,ie,le,oe,de,se,ge,me,be,he,X,W,J,j,G,R,ce,ue,_e,pe],styles:['@charset "UTF-8";.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 6px #0000001a;padding:2rem;max-width:1200px;margin:2rem auto}.card-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;color:#1a202c;margin-bottom:1.5rem}.blog-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.form-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;color:#2d3748;border-bottom:1px solid #e2e8f0;padding-bottom:.5rem}.form-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem}.form-field[_ngcontent-%COMP%]{flex:1;min-width:280px;display:flex;flex-direction:column;gap:.5rem}.field-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:#4a5568}.input-container[_ngcontent-%COMP%]{position:relative}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:4px;font-size:1rem;color:#1a202c;transition:border-color .2s,box-shadow .2s}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3182ce;box-shadow:0 0 0 3px #3182ce1a}.input-container[_ngcontent-%COMP%]   input.p-invalid[_ngcontent-%COMP%]{border-color:#e53e3e}.rich-text-content[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:4px;transition:border-color .2s}.rich-text-content.p-invalid[_ngcontent-%COMP%]{border-color:#e53e3e}.error-container[_ngcontent-%COMP%]{min-height:1.5rem}.error-message[_ngcontent-%COMP%]{color:#e53e3e;font-size:.85rem}.status-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.status-label[_ngcontent-%COMP%]{font-size:.9rem;color:#4a5568}app-image-upload[_ngcontent-%COMP%]{width:100%}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem}.p-button.btn-main[_ngcontent-%COMP%]{background:#3182ce;border:none;padding:.75rem 1.5rem;font-weight:500;transition:background .2s}.p-button.btn-main[_ngcontent-%COMP%]:hover{background:#2b6cb0}.p-button.p-button-secondary[_ngcontent-%COMP%]{color:#718096;font-weight:500}.p-button.p-button-secondary[_ngcontent-%COMP%]:hover{color:#2d3748}@media (max-width: 768px){.card[_ngcontent-%COMP%]{padding:1.5rem;margin:1rem}.form-row[_ngcontent-%COMP%]{flex-direction:column}.form-field[_ngcontent-%COMP%]{min-width:100%}.card-title[_ngcontent-%COMP%]{font-size:1.5rem}.section-title[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 480px){.card[_ngcontent-%COMP%]{padding:1rem;margin:.5rem}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.p-button[_ngcontent-%COMP%]{width:100%;text-align:center}}textarea[_ngcontent-%COMP%]{resize:none}']})}}return n})();export{nt as AddEnglishBlogComponent};
