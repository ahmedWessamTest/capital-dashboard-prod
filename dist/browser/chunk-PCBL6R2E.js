import{a as ae}from"./chunk-RMJHRBA4.js";import{a as ie,b as ne,c as re,d as oe}from"./chunk-2CYVADF6.js";import"./chunk-ULFGH5XU.js";import{a as le}from"./chunk-Y6SZKX5H.js";import"./chunk-4WY6IZPL.js";import{d as ee,e as te}from"./chunk-WDDFHKIH.js";import{a as K,b as W}from"./chunk-NZNLV7ZF.js";import"./chunk-AGVKSH7H.js";import{e as Z,j as q,p as z}from"./chunk-V2NMUT4R.js";import{a as Q}from"./chunk-WME6HQEM.js";import{a as se}from"./chunk-2O7EOZOI.js";import{a as j,c as $}from"./chunk-KEBJO4LJ.js";import{d as X,e as Y}from"./chunk-PEYIU4ER.js";import{b as U}from"./chunk-RJZ3H7D5.js";import"./chunk-5YI4S6VK.js";import{e as H,f as J}from"./chunk-PXM2JOVS.js";import{C as G,x as y}from"./chunk-27E65EIB.js";import{e as N}from"./chunk-67M3DXMG.js";import{n as B}from"./chunk-FYJ5Y7AH.js";import{Ab as c,Gb as V,Hb as D,Ib as P,Jb as C,Kb as m,Lb as w,Ma as A,Mb as M,Qa as a,Ra as T,Rb as R,Sb as k,Ub as b,Y as f,ba as F,fb as x,hb as h,ka as u,la as _,mb as I,mc as O,qb as s,rb as l,sb as p,wb as v,zb as S}from"./chunk-PSXZOWGB.js";import{a as L,b as E}from"./chunk-PSFXZ2QL.js";var de=["dt"],ce=o=>["/dashboard/menu/sliders/edit",o],pe=o=>["/dashboard/menu/sliders/view",o];function me(o,g){if(o&1){let e=v();s(0,"tr")(1,"th",15),m(2,"ID "),p(3,"p-sortIcon",16),l(),s(4,"th",17),m(5,"Image"),l(),s(6,"th",18),m(7,"English Title"),p(8,"p-sortIcon",19),l(),s(9,"th",20),m(10,"Created"),p(11,"p-sortIcon",21),l(),s(12,"th",17)(13,"p-dropdown",22,2),S("onChange",function(i){u(e);let n=C(14);return c(2).onFilterChange(i.value),_(n.showClear=!0)}),l()(),s(15,"th",17),m(16,"Actions"),l()()}if(o&2){let e=c(2);a(13),h("options",e.selectOptions)("showClear",!0)("autoZIndex",!0)}}function ue(o,g){if(o&1){let e=v();s(0,"tr")(1,"td",17),m(2),l(),s(3,"td",17)(4,"div",23),p(5,"img",24),l()(),s(6,"td",17)(7,"span",25),m(8),l()(),s(9,"td",17),m(10),l(),s(11,"td",17)(12,"p-inputSwitch",26),S("onChange",function(){let i=u(e).$implicit,n=c(2);return _(n.toggleSliderStatus(i))}),l()(),s(13,"td",17)(14,"div",27)(15,"a",28)(16,"p-button",29),S("onClick",function(){u(e);let i=c(2);return _(i.runSpinner())}),l()(),s(17,"a",28)(18,"p-button",30),S("onClick",function(){u(e);let i=c(2);return _(i.runSpinner())}),l()()()()()}if(o&2){let e=g.$implicit,t=c(2);a(2),w(e.id),a(3),h("src",t.getImageUrl(e.image),A)("alt",e.en_title),a(2),h("title",e.en_title),a(),M(" ",t.truncateText(e.en_title,30)," "),a(2),w(t.formatDate(e.created_at)),a(2),h("ngModel",e.active_status===1),a(3),h("routerLink",b(9,ce,e.id)),a(2),h("routerLink",b(11,pe,e.id))}}function _e(o,g){o&1&&(s(0,"tr")(1,"td",31)(2,"div",32),p(3,"app-no-data-found-banner"),l()()())}function he(o,g){if(o&1){let e=v();s(0,"div",3)(1,"div",4)(2,"h2",5),m(3,"Sliders Control"),l(),p(4,"p-button",6),l(),s(5,"div",7)(6,"span",8),p(7,"i",9),s(8,"input",10,0),S("input",function(i){u(e);let n=C(11),r=c();return _(r.onGlobalFilter(n,i))}),l()()(),s(10,"p-table",11,1),S("onSort",function(i){u(e);let n=c();return _(n.onSort(i))})("onPage",function(i){u(e);let n=c();return _(n.onPageChange(i))}),x(12,me,17,3,"ng-template",12)(13,ue,19,13,"ng-template",13)(14,_e,4,0,"ng-template",14),l()()}if(o&2){let e=c();a(10),h("paginator",!0)("rows",e.rowsPerPage)("totalRecords",e.totalRecords)("rowsPerPageOptions",e.getPagination())("showCurrentPageReport",!0)("value",e.filteredSliders)}}function Se(o,g){o&1&&p(0,"app-loading-data-banner")}var Ge=(()=>{class o{ngOnInit(){this.initDropDownFilter(),this.fetchSliders()}constructor(e){this.cdRef=e,this.ngxSpinnerService=f(j),this.messageService=f(y),this.slidersService=f(Q),this.isLoading=!0,this.sliders=[],this.filteredSliders=[],this.totalRecords=0,this.rowsPerPage=10,this.selectedStatus=null,this.selectOptions=[],this.sortField=null,this.sortOrder=1,this.currentPage=1,this.IMAGE_BASE_URL=U}initDropDownFilter(){this.selectOptions=[{label:"Active",value:"1"},{label:"Inactive",value:"0"}]}fetchSliders(){this.isLoading=!0,this.slidersService.getAll().subscribe({next:e=>{this.sliders=e.data.map(t=>E(L({},t),{active_status:Number(t.active_status),image:t.image?.trim()||"placeholder.png"})),this.applyFilters(),this.ngxSpinnerService.hide("actionsLoader"),this.isLoading=!1},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load sliders"}),this.isLoading=!1}})}applyFilters(){let e=[...this.sliders];this.selectedStatus!==null&&this.selectedStatus!==""&&(e=e.filter(t=>t.active_status.toString()===this.selectedStatus)),this.sortField&&e.sort((t,i)=>this.compareValues(t,i,this.sortField,this.sortOrder)),this.filteredSliders=e,this.totalRecords=e.length}onGlobalFilter(e,t){let i=t.target.value.toLowerCase(),n=[...this.sliders];this.selectedStatus!==null&&this.selectedStatus!==""&&(n=n.filter(r=>r.active_status.toString()===this.selectedStatus)),i&&(n=n.filter(r=>r.id.toString().includes(i)||r.en_title.toLowerCase().includes(i)||(r.image||"").toLowerCase().includes(i)||(r.active_status?"active":"inactive").includes(i)||r.created_at.toLowerCase().includes(i))),this.sortField&&n.sort((r,d)=>this.compareValues(r,d,this.sortField,this.sortOrder)),this.filteredSliders=n,this.totalRecords=n.length}compareValues(e,t,i,n){let r,d;return i==="id"?(r=Number(e.id),d=Number(t.id)):i==="en_title"?(r=e.en_title,d=t.en_title):i==="active_status"?(r=e.active_status,d=t.active_status):i==="created_at"||i==="updated_at"?(r=new Date(e[i]),d=new Date(t[i])):(r=e[i],d=t[i]),r==null?n*-1:d==null?n*1:r<d?n*-1:r>d?n*1:0}onFilterChange(e){this.selectedStatus=e,this.applyFilters()}onSort(e){this.sortField=e.field,this.sortOrder=e.order,this.applyFilters()}onPageChange(e){this.currentPage=e.page+1}toggleSliderStatus(e){this.ngxSpinnerService.show("actionsLoader"),this.messageService.clear(),(e.active_status===1?this.slidersService.disable(e.id):this.slidersService.enable(e.id)).subscribe({next:i=>{e.active_status=i.data.active_status,this.applyFilters(),this.messageService.add({severity:"success",summary:"Updated",detail:i.message}),this.ngxSpinnerService.hide("actionsLoader")},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update slider status"}),this.ngxSpinnerService.hide("actionsLoader")}})}deleteSlider(e){confirm(`Are you sure you want to delete "${e.en_title}"?`)&&(this.ngxSpinnerService.show("actionsLoader"),this.slidersService.disable(e.id).subscribe({next:()=>{this.sliders=this.sliders.filter(t=>t.id!==e.id),this.applyFilters(),this.messageService.add({severity:"success",summary:"Deleted",detail:"Slider deleted successfully"}),this.ngxSpinnerService.hide("actionsLoader")},error:()=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to delete slider"}),this.ngxSpinnerService.hide("actionsLoader")}}))}getPagination(){return[10,25,50,100].sort((e,t)=>e-t)}getImageUrl(e){return`${this.IMAGE_BASE_URL}${e}`}onImageError(e){let t=e.target;t.classList.add("error"),t.classList.remove("loaded")}runSpinner(){this.ngxSpinnerService.show("actionsLoader")}truncateText(e,t=50){return e.length>t?e.substring(0,t)+"...":e}formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}static{this.\u0275fac=function(t){return new(t||o)(T(O))}}static{this.\u0275cmp=F({type:o,selectors:[["app-all-sliders"]],viewQuery:function(t,i){if(t&1&&V(de,5),t&2){let n;D(n=P())&&(i.dt=n.first)}},standalone:!0,features:[R([y]),k],decls:3,vars:1,consts:[["search",""],["dt",""],["Dd",""],[1,"card"],[1,"flex","justify-between","items-center","mb-3"],[1,"text-2xl","font-semibold"],["routerLink","/dashboard/menu/sliders/add","label","Add Slider","icon","pi pi-plus",1,"btn-main","text-white"],[1,"mb-3","flex","justify-content-end"],[1,"p-input-icon-right"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Search sliders...",1,"mb-0",3,"input"],["responsiveLayout","scroll",3,"onSort","onPage","paginator","rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","id",1,"text-center"],["field","id"],[1,"text-center"],["pSortableColumn","en_title",1,"text-center"],["field","en_title"],["pSortableColumn","created_at",1,"text-center"],["field","created_at"],["styleClass","mx-auto","optionLabel","label","optionValue","value","placeholder","Status",1,"mx-auto",3,"onChange","options","showClear","autoZIndex"],[1,"w-16","h-16"],["appImageLoader","",1,"w-full","h-full","object-cover",3,"src","alt"],[3,"title"],[3,"onChange","ngModel"],[1,"flex","justify-center","gap-2"],[3,"routerLink"],["icon","pi pi-pencil","pTooltip","Edit Slider",1,"p-button-text","p-button-sm",3,"onClick"],["icon","pi pi-eye","pTooltip","View Slider",1,"p-button-text","p-button-sm",3,"onClick"],["colspan","8"],[1,"h-48","flex","justify-center","items-center","flex-col"]],template:function(t,i){t&1&&(p(0,"p-toast"),x(1,he,15,6,"div",3)(2,Se,1,0)),t&2&&(a(),I(1,i.isLoading?2:1))},dependencies:[J,H,G,te,ee,W,K,oe,ie,ne,re,Y,X,N,se,le,B,z,Z,q,$,ae]})}}return o})();export{Ge as AllSlidersComponent};
