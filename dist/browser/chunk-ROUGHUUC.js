import{a as y}from"./chunk-EEQJPE73.js";import{b as M}from"./chunk-WQRK5NAT.js";import{b as D}from"./chunk-CQOJENEW.js";import{a as E}from"./chunk-OOHQEE5L.js";import"./chunk-S7DFJDHE.js";import"./chunk-ZH6D4JNL.js";import"./chunk-LV7JVZMU.js";import"./chunk-4WY6IZPL.js";import{e as I}from"./chunk-WDDFHKIH.js";import{b as x}from"./chunk-NZNLV7ZF.js";import{b as v}from"./chunk-AGVKSH7H.js";import{q as _}from"./chunk-V2NMUT4R.js";import{a as f}from"./chunk-KEBJO4LJ.js";import{e as S}from"./chunk-PEYIU4ER.js";import"./chunk-RJZ3H7D5.js";import"./chunk-5YI4S6VK.js";import{f as q}from"./chunk-PXM2JOVS.js";import{x as o}from"./chunk-27E65EIB.js";import{b as h,d as g}from"./chunk-67M3DXMG.js";import{n as b}from"./chunk-FYJ5Y7AH.js";import{Ra as r,Rb as c,Sb as m,ba as u,hb as s,sb as p}from"./chunk-PSXZOWGB.js";import"./chunk-PSFXZ2QL.js";var V=(()=>{class a{constructor(t,e,i,n,d,l){this.route=t,this.router=e,this.validationService=i,this.ngxSpinnerService=n,this.buildingRequestsService=d,this.messageService=l,this.formFields=[],this.isEditMode=!1,this.editData=null,this.buildingRequestId=null,this.buildingInsurances=[],this.buildingInsuranceOptions=[],this.buildTypes=[],this.buildTypeOptions=[],this.buildCountries=[],this.buildCountryOptions=[],this.extraFormData={}}ngOnInit(){this.buildingRequestId=this.route.snapshot.paramMap.get("id"),this.isEditMode=!!this.buildingRequestId,this.route.data.subscribe({next:t=>{t?.data&&(this.buildingInsurances=t.data.buildingInsurances?.data||[],this.buildTypes=t.data.buildTypes?.data||[],this.buildCountries=t.data.buildCountries?.data||[],this.isEditMode&&t.data.buildingRequest&&(this.editData=t.data.buildingRequest.data,this.editData?.building_insurance_id&&(this.editData.building_insurance_id=Number(this.editData.building_insurance_id)),this.editData&&(this.extraFormData={user_id:this.editData.user_id})),this.buildingInsuranceOptions=this.buildingInsurances.map(e=>({label:`${e.company_name} - ${e.en_title}`,value:e.id.toString()})),this.buildTypeOptions=this.buildTypes.map(e=>({label:e.en_title,value:e.id.toString()})),this.buildCountryOptions=this.buildCountries.map(e=>({label:e.en_title,value:e.id.toString()})),this.initializeFields(t?.data?.buildingRequest?.data?.request_type),this.ngxSpinnerService.hide("actionsLoader"))},error:t=>{console.error("Failed to load data",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load required data"}),this.ngxSpinnerService.hide("actionsLoader")},complete:()=>{this.ngxSpinnerService.hide("actionsLoader")}})}initializeFields(t){let e=["requested","pending","confirmed","canceled"],i=this.isEditMode&&this.editData?this.editData.active_status:null,n=i?e.indexOf(i):-1,d=[{label:"Requested",value:"requested"},{label:"Pending",value:"pending"},{label:"Confirmed",value:"confirmed"},{label:"Canceled",value:"canceled"}].filter(l=>{let C=e.indexOf(l.value);return i==="confirmed"&&l.value==="canceled"?!1:!this.isEditMode||n===-1||C>=n});console.log(t),t==="corporate"||t==="company-corporate"?this.formFields=[{name:"admin_building_insurance_number",label:"Admin Building Insurance Number",type:"text",required:!0,placeholder:"Enter Admin Building Insurance Number"},{name:"start_date",label:"Start Date",type:"date",required:!0,placeholder:"Select Start Date",showIf:{filed:"active_status",value:"confirmed"}},{name:"duration",label:"Duration (Years)",type:"dropdown",required:!0,placeholder:"Enter Duration in Years",showIf:{filed:"active_status",value:"confirmed"}},{name:"end_date",label:"End Date",type:"date",required:!0,placeholder:"Select End Date"},{name:"active_status",label:"Status",type:"dropdown",required:!0,options:d,placeholder:"Select Status"},{name:"building_insurance_id",label:"Building Insurance",type:"dropdown",required:!0,options:this.buildingInsuranceOptions,placeholder:"Select Building Insurance",disabled:!0},{name:"payment_method",label:"Payment Method",type:"text",required:!0,placeholder:"Select Payment Method",disabled:!0},{name:"name",label:"Name",type:"text",required:!0,placeholder:"Enter Name",disabled:!0},{name:"email",label:"Email",type:"text",required:!0,placeholder:"Enter Email",disabled:!0},{name:"phone",label:"Phone",type:"text",required:!0,placeholder:"Enter Phone Number",disabled:!0},{name:"building_insurance_number",label:"Building Insurance Number",type:"text",required:!0,placeholder:"Enter Building Insurance Number",disabled:!0},{name:"company_name",label:"Company Name",type:"text",required:!0,placeholder:"Enter Company Name",disabled:!0},{name:"company_address",label:"Company Address",type:"text",required:!0,placeholder:"Enter Company Address",disabled:!0},{name:"company_building_number",label:"Number Of Buildings",type:"text",required:!0,placeholder:"Enter Number of Buildings",disabled:!0},{name:"building_type",label:"Buildings Type",type:"text",required:!0,placeholder:"Enter Building Insurance Number",disabled:!0},{name:"company_building_total_money",label:"Building Prices",type:"text",required:!0,placeholder:"Enter Building Price",disabled:!0}]:this.formFields=[{name:"admin_building_insurance_number",label:"Admin Building Insurance Number",type:"text",required:!0,placeholder:"Enter Admin Building Insurance Number"},{name:"start_date",label:"Start Date",type:"date",required:!0,placeholder:"Select Start Date",showIf:{filed:"active_status",value:"confirmed"}},{name:"duration",label:"Duration (Years)",type:"dropdown",required:!0,placeholder:"Enter Duration in Years",showIf:{filed:"active_status",value:"confirmed"}},{name:"end_date",label:"End Date",type:"date",required:!0,placeholder:"Select End Date"},{name:"active_status",label:"Status",type:"dropdown",required:!0,options:d,placeholder:"Select Status"},{name:"building_insurance_id",label:"Building Insurance",type:"dropdown",required:!0,options:this.buildingInsuranceOptions,placeholder:"Select Building Insurance",disabled:!0},{name:"payment_method",label:"Payment Method",type:"text",required:!0,placeholder:"Select Payment Method",disabled:!0},{name:"name",label:"Name",type:"text",required:!0,placeholder:"Enter Name",disabled:!0},{name:"email",label:"Email",type:"text",required:!0,placeholder:"Enter Email",disabled:!0},{name:"phone",label:"Phone",type:"text",required:!0,placeholder:"Enter Phone Number",disabled:!0},{name:"building_insurance_number",label:"Building Insurance Number",type:"text",required:!0,placeholder:"Enter Building Insurance Number",disabled:!0},{name:"building_price",label:"Building Price",type:"text",required:!0,placeholder:"Enter Building Price",disabled:!0}]}static{this.\u0275fac=function(e){return new(e||a)(r(h),r(g),r(E),r(f),r(y),r(o))}}static{this.\u0275cmp=u({type:a,selectors:[["app-add-edit-property-requests"]],standalone:!0,features:[c([o]),m],decls:1,vars:9,consts:[[3,"fields","entityType","title","redirectRoute","isEdit","editData","extraFormData","category","changeStatus"]],template:function(e,i){e&1&&p(0,"app-generic-form",0),e&2&&s("fields",i.formFields)("entityType","building-requests")("title",i.isEditMode?"Edit Building Request":"Add Building Request")("redirectRoute","/dashboard/menu/building-requests")("isEdit",i.isEditMode)("editData",i.editData)("extraFormData",i.extraFormData)("category","building")("changeStatus",!0)},dependencies:[b,_,I,v,M,x,q,S,D],styles:["[_nghost-%COMP%]     .p-dropdown{width:100%;height:50px;background:#fff;border-radius:12px;padding:0 20px;color:#1f2937;transition:all .2s ease;border:1px solid rgba(0,0,0,.285)}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{font-size:16px;color:#6b7280;margin-top:1px}[_nghost-%COMP%]     .p-dropdown-trigger{background:transparent;border:none;position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#6b7280}[_nghost-%COMP%]     .p-calendar{width:100%}[_nghost-%COMP%]     .p-calendar .p-inputtext{width:100%;height:50px;border-radius:12px;padding:0 20px;color:#1f2937;transition:all .2s ease;border:1px solid rgba(0,0,0,.285);font-size:16px}[_nghost-%COMP%]     .p-calendar .p-inputtext::placeholder{color:#6b7280}[_nghost-%COMP%]     .p-calendar .p-datepicker-trigger{background:transparent;border:none;position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#6b7280}"]})}}return a})();export{V as AddEditPropertyRequestsComponent};
