import{a as y}from"./chunk-FVKKPNZF.js";import{b as I}from"./chunk-WQRK5NAT.js";import{b as M}from"./chunk-CQOJENEW.js";import{a as D}from"./chunk-OOHQEE5L.js";import"./chunk-S7DFJDHE.js";import"./chunk-ZH6D4JNL.js";import"./chunk-LV7JVZMU.js";import"./chunk-4WY6IZPL.js";import{e as j}from"./chunk-WDDFHKIH.js";import{b as S}from"./chunk-NZNLV7ZF.js";import{b as q}from"./chunk-AGVKSH7H.js";import{q as _}from"./chunk-V2NMUT4R.js";import{a as g}from"./chunk-KEBJO4LJ.js";import{e as x}from"./chunk-PEYIU4ER.js";import"./chunk-RJZ3H7D5.js";import"./chunk-5YI4S6VK.js";import{f as v}from"./chunk-PXM2JOVS.js";import{x as s}from"./chunk-27E65EIB.js";import{b,d as f}from"./chunk-67M3DXMG.js";import{n as h}from"./chunk-FYJ5Y7AH.js";import{Ra as r,Rb as c,Sb as m,ba as l,hb as u,sb as p}from"./chunk-PSXZOWGB.js";import"./chunk-PSFXZ2QL.js";var G=(()=>{class i{constructor(t,e,a,o,d,n){this.route=t,this.router=e,this.validationService=a,this.ngxSpinnerService=o,this.jobRequestsService=d,this.messageService=n,this.formFields=[],this.isEditMode=!1,this.editData=null,this.jobRequestId=null,this.jobInsurances=[],this.jobInsuranceOptions=[],this.categories=[],this.categoryOptions=[],this.extraFormData={}}ngOnInit(){this.jobRequestId=this.route.snapshot.paramMap.get("id"),this.isEditMode=!!this.jobRequestId,this.route.data.subscribe({next:t=>{t?.data&&(this.jobInsurances=t.data.jobInsurances?.data||[],this.categories=t.data.categories?.data||[],this.isEditMode&&t.data.jobRequest&&(this.editData=t.data.jobRequest.data,this.editData?.jop_insurance_id&&(this.editData.jop_insurance_id=Number(this.editData.jop_insurance_id)),this.editData?.category_id&&(this.editData.category_id=Number(this.editData.category_id)),this.editData&&(this.extraFormData={user_id:this.editData.user_id,jop_insurance_id:this.editData.jop_insurance_id,payment_method:this.editData.payment_method||"Cash"})),console.log("jobInsurances",this.jobInsurances),console.log("jobInsurances",this.editData),this.jobInsuranceOptions=this.jobInsurances.map(e=>({label:`${e.company_name} - ${e.en_title}`,value:e.id.toString()})),this.categoryOptions=this.categories.map(e=>({label:e.en_title,value:e.id.toString()})),this.initializeFields(t?.data?.jobRequest?.data?.request_type),this.ngxSpinnerService.hide("actionsLoader"))},error:t=>{console.error("Failed to load data",t),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load required data"}),this.ngxSpinnerService.hide("actionsLoader")},complete:()=>{this.ngxSpinnerService.hide("actionsLoader")}})}initializeFields(t){let e=["requested","pending","confirmed","canceled"],a=this.isEditMode&&this.editData?this.editData.active_status:null,o=a?e.indexOf(a):-1,d=[{label:"Requested",value:"requested"},{label:"Pending",value:"pending"},{label:"Confirmed",value:"confirmed"},{label:"Canceled",value:"canceled"}].filter(n=>{let P=e.indexOf(n.value);return a==="confirmed"&&n.value==="canceled"?!1:!this.isEditMode||o===-1||P>=o});t==="corporate"||t==="company-corporate"?this.formFields=[{name:"admin_jop_insurance_number",label:"Admin Medical Insurance Number",type:"text",required:!0,placeholder:"Enter Admin Medical Insurance Number"},{name:"start_date",label:"Start Date",type:"date",required:!0,placeholder:"Select Start Date"},{name:"duration",label:"Duration (Years)",type:"dropdown",required:!0,placeholder:"Enter Duration in Years",showIf:{filed:"active_status",value:"confirmed"}},{name:"end_date",label:"End Date",type:"date",required:!0,placeholder:"Select End Date",showIf:{filed:"active_status",value:"confirmed"}},{name:"active_status",label:"Status",type:"dropdown",required:!0,options:d,placeholder:"Select Status"},{name:"category_id",label:"Category",type:"dropdown",required:!0,options:this.categoryOptions,placeholder:"Select Category",disabled:!0},{name:"payment_method",label:"Payment Method",type:"text",required:!0,placeholder:"Select Payment Method",disabled:!0},{name:"name",label:"Name",type:"text",required:!0,placeholder:"Enter Name",disabled:!0},{name:"email",label:"Email",type:"text",required:!0,placeholder:"Enter Email",disabled:!0},{name:"phone",label:"Phone",type:"text",required:!0,placeholder:"Enter Phone Number",disabled:!0},{name:"jop_title",label:"Professional Title",type:"text",required:!0,placeholder:"Professional Title",disabled:!0},{name:"company_employee_total_money",label:"Total Price",type:"text",required:!0,placeholder:"Professional Price",disabled:!0}]:this.formFields=[{name:"admin_jop_insurance_number",label:"Admin Medical Insurance Number",type:"text",required:!0,placeholder:"Enter Admin Medical Insurance Number"},{name:"start_date",label:"Start Date",type:"date",required:!0,placeholder:"Select Start Date"},{name:"duration",label:"Duration (Years)",type:"dropdown",required:!0,placeholder:"Enter Duration in Years",showIf:{filed:"active_status",value:"confirmed"}},{name:"end_date",label:"End Date",type:"date",required:!0,placeholder:"Select End Date",showIf:{filed:"active_status",value:"confirmed"}},{name:"active_status",label:"Status",type:"dropdown",required:!0,options:d,placeholder:"Select Status"},{name:"category_id",label:"Category",type:"dropdown",required:!0,options:this.categoryOptions,placeholder:"Select Category",disabled:!0},{name:"payment_method",label:"Payment Method",type:"text",required:!0,placeholder:"Select Payment Method",disabled:!0},{name:"name",label:"Name",type:"text",required:!0,placeholder:"Enter Name",disabled:!0},{name:"email",label:"Email",type:"text",required:!0,placeholder:"Enter Email",disabled:!0},{name:"phone",label:"Phone",type:"text",required:!0,placeholder:"Enter Phone Number",disabled:!0},{name:"jop_title",label:"Professional Title",type:"text",required:!0,placeholder:"Professional Title",disabled:!0},{name:"jop_price",label:"Professional Price",type:"text",required:!0,placeholder:"Professional Price",disabled:!0},{name:"jop_main_id",label:"Professional Main Image",type:"image",required:!1,placeholder:"Professional Main Image Link",disabled:!0},{name:"jop_second_id",label:"Professional Second Image",type:"image",required:!1,placeholder:"Professional Second Image Link",disabled:!0}]}static{this.\u0275fac=function(e){return new(e||i)(r(b),r(f),r(D),r(g),r(y),r(s))}}static{this.\u0275cmp=l({type:i,selectors:[["app-add-edit-jop-requests"]],standalone:!0,features:[c([s]),m],decls:1,vars:9,consts:[[3,"fields","entityType","title","redirectRoute","isEdit","editData","extraFormData","category","changeStatus"]],template:function(e,a){e&1&&p(0,"app-generic-form",0),e&2&&u("fields",a.formFields)("entityType","jop-requests")("title",a.isEditMode?"Edit Professional Request":"Add Professional Request")("redirectRoute","/dashboard/menu/jop-requests")("isEdit",a.isEditMode)("editData",a.editData)("extraFormData",a.extraFormData)("category","jop")("changeStatus",!0)},dependencies:[h,_,j,q,I,S,v,x,M],styles:["[_nghost-%COMP%]     .p-dropdown{width:100%;height:50px;background:#fff;border-radius:12px;padding:0 20px;color:#1f2937;transition:all .2s ease;border:1px solid rgba(0,0,0,.285)}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{font-size:16px;color:#6b7280;margin-top:1px}[_nghost-%COMP%]     .p-dropdown-trigger{background:transparent;border:none;position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#6b7280}[_nghost-%COMP%]     .p-calendar{width:100%}[_nghost-%COMP%]     .p-calendar .p-inputtext{width:100%;height:50px;border-radius:12px;padding:0 20px;color:#1f2937;transition:all .2s ease;border:1px solid rgba(0,0,0,.285);font-size:16px}[_nghost-%COMP%]     .p-calendar .p-inputtext::placeholder{color:#6b7280}[_nghost-%COMP%]     .p-calendar .p-datepicker-trigger{background:transparent;border:none;position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#6b7280}"]})}}return i})();export{G as AddEditJopRequestsComponent};
