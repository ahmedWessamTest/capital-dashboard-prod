import{a as xe}from"./chunk-4JHUVNNE.js";import{a as ge,b as fe}from"./chunk-WQRK5NAT.js";import{a as ue}from"./chunk-S7DFJDHE.js";import{a as _e}from"./chunk-ZH6D4JNL.js";import{a as me,b as de}from"./chunk-AGVKSH7H.js";import{b as Q,c as u,e as X,f as ee,k as te,m as ie,n as ne,o as ae,q as le}from"./chunk-V2NMUT4R.js";import{a as pe}from"./chunk-2O7EOZOI.js";import{a as J,b as Y,c as K}from"./chunk-KEBJO4LJ.js";import{d as se,e as ce}from"./chunk-PEYIU4ER.js";import{a as Z,b as H}from"./chunk-RJZ3H7D5.js";import"./chunk-5YI4S6VK.js";import{d as oe,f as re}from"./chunk-PXM2JOVS.js";import{x as j}from"./chunk-27E65EIB.js";import{h as R,n as G,r as W}from"./chunk-FYJ5Y7AH.js";import{Ab as A,Kb as l,Qa as r,Rb as $,S as k,Sb as B,Tb as h,Ub as C,X as z,Y as f,ba as V,fb as s,gb as x,hb as g,ka as N,la as L,mb as c,qb as e,rb as t,sb as d,wb as U,zb as D}from"./chunk-PSXZOWGB.js";import"./chunk-PSFXZ2QL.js";var he=(()=>{class n{constructor(i){this.http=i,this.baseUrl=Z,this.endpoint="claim-info"}getAll(){return this.http.get(`${this.baseUrl}${this.endpoint}`)}update(i,o){return this.http.post(`${this.baseUrl}${this.endpoint}/${i}`,o)}static{this.\u0275fac=function(o){return new(o||n)(z(W))}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ce=()=>({language:"en",direction:"ltr",height:400}),q=n=>({"p-invalid":n}),ve=()=>({language:"ar",direction:"rtl",height:400});function Ee(n,_){n&1&&(e(0,"small",14),l(1,"English Main Title is required"),t())}function be(n,_){n&1&&(e(0,"small",14),l(1,"Arabic Main Title is required"),t())}function Me(n,_){n&1&&(e(0,"small",14),l(1,"English Main Text is required"),t())}function Fe(n,_){n&1&&(e(0,"small",14),l(1,"Arabic Main Text is required"),t())}function Ie(n,_){n&1&&(e(0,"small",14),l(1,"English Second Title is required"),t())}function Te(n,_){n&1&&(e(0,"small",14),l(1,"Arabic Second Title is required"),t())}function ye(n,_){n&1&&(e(0,"small",14),l(1,"English Second Text is required"),t())}function we(n,_){n&1&&(e(0,"small",14),l(1,"Arabic Second Text is required"),t())}function Oe(n,_){n&1&&(e(0,"small",14),l(1,"English Meta Title is required"),t())}function Pe(n,_){n&1&&(e(0,"small",14),l(1,"Arabic Meta Title is required"),t())}function Ae(n,_){n&1&&(e(0,"small",14),l(1,"English Meta Text is required"),t())}function qe(n,_){n&1&&(e(0,"small",14),l(1,"Arabic Meta Text is required"),t())}function Ne(n,_){if(n&1){let i=U();e(0,"h2",4),l(1,"Claim Information"),t(),e(2,"form",5),D("ngSubmit",function(){N(i);let m=A();return L(m.onSubmit())}),e(3,"div",6)(4,"div",7)(5,"label",8),l(6,"Main Image"),t(),e(7,"div",9)(8,"app-image-upload",10),D("imagesChanged",function(m){N(i);let p=A();return L(p.onImagesChanged(m))}),t()()(),e(9,"div",7)(10,"label",11),l(11,"English Main Title"),t(),e(12,"div",9),d(13,"input",12),t(),e(14,"div",13),s(15,Ee,2,0,"small",14),t()(),e(16,"div",7)(17,"label",15),l(18,"Arabic Main Title"),t(),e(19,"div",9),d(20,"input",16),t(),e(21,"div",13),s(22,be,2,0,"small",14),t()(),e(23,"div",7)(24,"label",17),l(25,"English Main Text"),t(),e(26,"div",9),d(27,"ngx-jodit",18),t(),e(28,"div",13),s(29,Me,2,0,"small",14),t()(),e(30,"div",19)(31,"label",20),l(32,"Arabic Main Text"),t(),e(33,"div",9),d(34,"ngx-jodit",21),t(),e(35,"div",13),s(36,Fe,2,0,"small",14),t()(),e(37,"div",7)(38,"label",22),l(39,"English Second Title"),t(),e(40,"div",9),d(41,"input",23),t(),e(42,"div",13),s(43,Ie,2,0,"small",14),t()(),e(44,"div",7)(45,"label",24),l(46,"Arabic Second Title"),t(),e(47,"div",9),d(48,"input",25),t(),e(49,"div",13),s(50,Te,2,0,"small",14),t()(),e(51,"div",7)(52,"label",26),l(53,"English Second Text"),t(),e(54,"div",9),d(55,"ngx-jodit",27),t(),e(56,"div",13),s(57,ye,2,0,"small",14),t()(),e(58,"div",19)(59,"label",28),l(60,"Arabic Second Text"),t(),e(61,"div",9),d(62,"ngx-jodit",29),t(),e(63,"div",13),s(64,we,2,0,"small",14),t()(),e(65,"h3",30),l(66,"Meta Information"),t(),e(67,"div",7)(68,"label",31),l(69,"English Meta Title"),t(),e(70,"div",9),d(71,"input",32),t(),e(72,"div",13),s(73,Oe,2,0,"small",14),t()(),e(74,"div",7)(75,"label",33),l(76,"Arabic Meta Title"),t(),e(77,"div",9),d(78,"input",34),t(),e(79,"div",13),s(80,Pe,2,0,"small",14),t()(),e(81,"div",7)(82,"label",35),l(83,"English Meta Text"),t(),e(84,"div",9),d(85,"textarea",36),t(),e(86,"div",13),s(87,Ae,2,0,"small",14),t()(),e(88,"div",7)(89,"label",37),l(90,"Arabic Meta Text"),t(),e(91,"div",9),d(92,"textarea",38),t(),e(93,"div",13),s(94,qe,2,0,"small",14),t()()(),e(95,"div",39),d(96,"button",40),t()()}if(n&2){let i,o,m,p,v,S,E,b,M,F,I,T,y,w,O,P,a=A();r(2),g("formGroup",a.claimForm),r(6),g("initialImages",a.initialImages)("singleImageMode",!0),r(7),c(15,(i=a.claimForm.get("en_main_title"))!=null&&i.invalid&&((i=a.claimForm.get("en_main_title"))!=null&&i.touched)?15:-1),r(7),c(22,(o=a.claimForm.get("ar_main_title"))!=null&&o.invalid&&((o=a.claimForm.get("ar_main_title"))!=null&&o.touched)?22:-1),r(5),g("options",h(29,Ce))("ngClass",C(30,q,((m=a.claimForm.get("en_main_text"))==null?null:m.touched)&&((m=a.claimForm.get("en_main_text"))==null?null:m.invalid))),x("disabled",a.isLoading?!0:null),r(2),c(29,(p=a.claimForm.get("en_main_text"))!=null&&p.invalid&&((p=a.claimForm.get("en_main_text"))!=null&&p.touched)?29:-1),r(5),g("options",h(32,ve))("ngClass",C(33,q,((v=a.claimForm.get("ar_main_text"))==null?null:v.touched)&&((v=a.claimForm.get("ar_main_text"))==null?null:v.invalid))),x("disabled",a.isLoading?!0:null),r(2),c(36,(S=a.claimForm.get("ar_main_text"))!=null&&S.invalid&&((S=a.claimForm.get("ar_main_text"))!=null&&S.touched)?36:-1),r(7),c(43,(E=a.claimForm.get("en_second_title"))!=null&&E.invalid&&((E=a.claimForm.get("en_second_title"))!=null&&E.touched)?43:-1),r(7),c(50,(b=a.claimForm.get("ar_second_title"))!=null&&b.invalid&&((b=a.claimForm.get("ar_second_title"))!=null&&b.touched)?50:-1),r(5),g("options",h(35,Ce))("ngClass",C(36,q,((M=a.claimForm.get("en_second_text"))==null?null:M.touched)&&((M=a.claimForm.get("en_second_text"))==null?null:M.invalid))),x("disabled",a.isLoading?!0:null),r(2),c(57,(F=a.claimForm.get("en_second_text"))!=null&&F.invalid&&((F=a.claimForm.get("en_second_text"))!=null&&F.touched)?57:-1),r(5),g("options",h(38,ve))("ngClass",C(39,q,((I=a.claimForm.get("ar_second_text"))==null?null:I.touched)&&((I=a.claimForm.get("ar_second_text"))==null?null:I.invalid))),x("disabled",a.isLoading?!0:null),r(2),c(64,(T=a.claimForm.get("ar_second_text"))!=null&&T.invalid&&((T=a.claimForm.get("ar_second_text"))!=null&&T.touched)?64:-1),r(9),c(73,(y=a.claimForm.get("en_meta_title"))!=null&&y.invalid&&((y=a.claimForm.get("en_meta_title"))!=null&&y.touched)?73:-1),r(7),c(80,(w=a.claimForm.get("ar_meta_title"))!=null&&w.invalid&&((w=a.claimForm.get("ar_meta_title"))!=null&&w.touched)?80:-1),r(7),c(87,(O=a.claimForm.get("en_meta_text"))!=null&&O.invalid&&((O=a.claimForm.get("en_meta_text"))!=null&&O.touched)?87:-1),r(7),c(94,(P=a.claimForm.get("ar_meta_text"))!=null&&P.invalid&&((P=a.claimForm.get("ar_meta_text"))!=null&&P.touched)?94:-1),r(2),g("disabled",a.claimForm.invalid||a.isLoading)("icon",a.isLoading?"pi pi-spin pi-spinner mx-2":"")}}function Le(n,_){n&1&&d(0,"app-loading-data-banner",41)}var mt=(()=>{class n{constructor(){this.fb=f(ae),this.claimInfoService=f(he),this.ngxSpinnerService=f(J),this.messageService=f(j),this.imageURL=H,this.claimForm=null,this.originalData=null,this.isLoading=!1,this.messages=[],this.claimInfoId=null,this.initialImages=[],this.addedImage=null}ngOnInit(){this.loadClaimInfo()}loadClaimInfo(){this.isLoading=!0,this.ngxSpinnerService.show("claimSpinner"),this.claimInfoService.getAll().subscribe({next:i=>{i.data?(this.originalData=i.data,this.claimInfoId=i.data.id,this.initialImages=[{id:i.data.id,image:this.imageURL+i.data.main_image,active_status:!0,is_main:!0}],this.initializeForm(i.data)):(this.messageService.add({severity:"warn",summary:"Warning",detail:"No claim information found."}),this.messages=[{severity:"warn",summary:"Warning",detail:"No claim information found."}],this.initializeForm({id:0,en_main_title:"",ar_main_title:"",en_main_text:"",ar_main_text:"",main_image:"",en_second_title:"",ar_second_title:"",en_second_text:"",ar_second_text:"",en_meta_title:"",ar_meta_title:"",en_meta_text:"",ar_meta_text:"",created_at:"",updated_at:"",active_status:!0})),this.ngxSpinnerService.hide("claimSpinner"),this.isLoading=!1},error:()=>{this.ngxSpinnerService.hide("claimSpinner"),this.isLoading=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load claim information"}),this.messages=[{severity:"error",summary:"Error",detail:"Failed to load claim information"}]}})}initializeForm(i){this.claimForm=this.fb.group({en_main_title:[i.en_main_title,u.required],ar_main_title:[i.ar_main_title,u.required],en_main_text:[i.en_main_text,u.required],ar_main_text:[i.ar_main_text,u.required],main_image:[i.main_image],en_second_title:[i.en_second_title,u.required],ar_second_title:[i.ar_second_title,u.required],en_second_text:[i.en_second_text,u.required],ar_second_text:[i.ar_second_text,u.required],en_meta_title:[i.en_meta_title,u.required],ar_meta_title:[i.ar_meta_title,u.required],en_meta_text:[i.en_meta_text,u.required],ar_meta_text:[i.ar_meta_text,u.required]})}onImagesChanged(i){if(i.added.length>0){this.addedImage=i.added[0];let o=new FileReader;o.onload=()=>{this.claimForm?.patchValue({main_image:o.result}),this.claimForm?.markAsDirty()},o.readAsDataURL(this.addedImage)}else i.removed.length>0&&(this.addedImage=null,this.claimForm?.patchValue({main_image:""}),this.claimForm?.markAsDirty())}onSubmit(){if(!this.claimForm?.dirty){this.messageService.add({severity:"info",summary:"Info",detail:"No changes to save"}),this.messages=[{severity:"info",summary:"Info",detail:"No changes to save"}];return}if(this.claimForm?.valid){if(this.claimInfoId===null){this.messageService.add({severity:"error",summary:"Error",detail:"Cannot update: Claim information ID is missing."});return}this.isLoading=!0,this.ngxSpinnerService.show("claimSpinner");let i=new FormData;["en_main_title","ar_main_title","en_main_text","ar_main_text","en_second_title","ar_second_title","en_second_text","ar_second_text","en_meta_title","ar_meta_title","en_meta_text","ar_meta_text"].forEach(m=>{let p=this.claimForm?.get(m)?.value;p!=null&&i.append(m,p)}),this.addedImage&&i.append("main_image",this.addedImage),this.claimInfoService.update(this.claimInfoId,i).subscribe({next:m=>{this.ngxSpinnerService.hide("claimSpinner"),this.isLoading=!1,this.messageService.add({severity:"success",summary:"Success",detail:m.message}),this.messages=[{severity:"success",summary:"Success",detail:m.message}],this.addedImage=null,this.claimForm?.markAsPristine()},error:()=>{this.ngxSpinnerService.hide("claimSpinner"),this.isLoading=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update claim information"}),this.messages=[{severity:"error",summary:"Error",detail:"Failed to update claim information"}]}})}else{this.claimForm?.markAllAsTouched();let i=Object.keys(this.claimForm.controls).filter(o=>this.claimForm?.get(o)?.invalid).map(o=>this.claimForm?.get(o)?.errors?.required?`${o.replace(/_/g," ")} is required`:`${o.replace(/_/g," ")} is invalid`);this.messageService.add({severity:"error",summary:"Error",detail:`Invalid fields: ${i.join(", ")}`}),this.messages=[{severity:"error",summary:"Error",detail:`Invalid fields: ${i.join(", ")}`}]}}markAsTouched(i){this.claimForm?.get(i)?.markAsTouched()}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=V({type:n,selectors:[["app-claim-info"]],standalone:!0,features:[$([j]),B],decls:7,vars:3,consts:[["position","top-right",3,"baseZIndex"],[1,"about-download-control","p-4","w-full"],["name","claimSpinner","bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","square-spin",3,"fullScreen"],[2,"color","white"],[1,"mb-4"],[1,"w-full",3,"ngSubmit","formGroup"],[1,"about-download-items","w-full"],[1,"about-download-item","w-full"],["for","main_image",1,"font-medium"],[1,"input-container","w-full"],["id","main-image",3,"imagesChanged","initialImages","singleImageMode"],["for","en_main_title",1,"font-medium"],["id","en_main_title","type","text","pInputText","","formControlName","en_main_title","placeholder","Enter English Main Title",1,"w-full"],[1,"error-container"],[1,"error-message"],["for","ar_main_title",1,"font-medium"],["id","ar_main_title","type","text","pInputText","","formControlName","ar_main_title","placeholder","Enter Arabic Main Title",1,"w-full"],["for","en_main_text",1,"font-medium"],["id","en_main_text","formControlName","en_main_text","placeholder","Enter English Main Text",1,"w-full","rich-text-content",3,"options","ngClass"],[1,"about-download-item","w-full","mt-8","mb-4"],["for","ar_main_text",1,"font-medium"],["id","ar_main_text","formControlName","ar_main_text","placeholder","Enter Arabic Main Text",1,"w-full","rich-text-content",3,"options","ngClass"],["for","en_second_title",1,"font-medium"],["id","en_second_title","type","text","pInputText","","formControlName","en_second_title","placeholder","Enter English Second Title",1,"w-full"],["for","ar_second_title",1,"font-medium"],["id","ar_second_title","type","text","pInputText","","formControlName","ar_second_title","placeholder","Enter Arabic Second Title",1,"w-full"],["for","en_second_text",1,"font-medium"],["id","en_second_text","formControlName","en_second_text","placeholder","Enter English Second Text",1,"w-full","rich-text-content",3,"options","ngClass"],["for","ar_second_text",1,"font-medium"],["id","ar_second_text","formControlName","ar_second_text","placeholder","Enter Arabic Second Text",1,"w-full","rich-text-content",3,"options","ngClass"],[1,"mt-4","mb-3"],["for","en_meta_title",1,"font-medium"],["id","en_meta_title","type","text","pInputText","","formControlName","en_meta_title","placeholder","Enter English Meta Title",1,"w-full"],["for","ar_meta_title",1,"font-medium"],["id","ar_meta_title","type","text","pInputText","","formControlName","ar_meta_title","placeholder","Enter Arabic Meta Title",1,"w-full"],["for","en_meta_text",1,"font-medium"],["id","en_meta_text","pInputTextarea","","formControlName","en_meta_text","placeholder","Enter English Meta Text",1,"w-full"],["for","ar_meta_text",1,"font-medium"],["id","ar_meta_text","pInputTextarea","","formControlName","ar_meta_text","placeholder","Enter Arabic Meta Text",1,"w-full"],[1,"mt-4","w-full"],["pButton","","type","submit","label","Save Changes",1,"btn-main","px-3","w-full",3,"disabled","icon"],[1,"w-full"]],template:function(o,m){o&1&&(d(0,"p-toast",0),e(1,"div",1),s(2,Ne,97,41)(3,Le,1,0),t(),e(4,"ngx-spinner",2)(5,"p",3),l(6,"Loading..."),t()()),o&2&&(g("baseZIndex",5e3),r(2),c(2,m.claimForm?2:3),r(2),g("fullScreen",!0))},dependencies:[pe,G,R,le,te,Q,X,ee,ie,ne,ce,se,K,Y,re,oe,de,me,fe,ge,xe,_e,ue],styles:[".contact-us-control[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #00000014}.contact-us-control[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#333}.contact-us-control[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;color:#555}.contact-us-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.phone-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem}@media (max-width: 768px){.phone-row[_ngcontent-%COMP%]{flex-wrap:wrap}}.contact-us-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.contact-us-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500}.contact-us-item[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{position:relative;height:42px}.contact-us-item[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:10px;top:50%;transform:translateY(-50%);font-size:1rem;z-index:1}.contact-us-item[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .contact-us-item[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100%;padding:.75rem .75rem .75rem 3rem;border-radius:6px;border:1px solid #ced4da;transition:border-color .2s;width:100%}.contact-us-item[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .contact-us-item[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;box-shadow:0 0 0 2px #2196f333}.contact-us-item[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:none;margin-bottom:1rem}.contact-us-item[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{min-height:20px;margin-top:4px}.contact-us-item[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#f44336;font-size:.8rem}.btn-main[_ngcontent-%COMP%]{background-color:#2196f3;border-color:#2196f3;color:#fff}.btn-main[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1976d2;border-color:#1976d2}.btn-main[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}"]})}}return n})();export{mt as ClaimInfoComponent};
