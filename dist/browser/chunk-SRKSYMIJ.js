import{a as $}from"./chunk-GET2K5KJ.js";import{a as G,d as H}from"./chunk-2CYVADF6.js";import"./chunk-ULFGH5XU.js";import"./chunk-4WY6IZPL.js";import"./chunk-WDDFHKIH.js";import{a as q,b as z}from"./chunk-NZNLV7ZF.js";import"./chunk-AGVKSH7H.js";import{e as N,j as W,p as j}from"./chunk-V2NMUT4R.js";import{a as F,c as k}from"./chunk-KEBJO4LJ.js";import"./chunk-5YI4S6VK.js";import{d as P,e as R,f as O}from"./chunk-PXM2JOVS.js";import{C as I}from"./chunk-27E65EIB.js";import{d as L,e as V}from"./chunk-67M3DXMG.js";import{h as A,n as D}from"./chunk-FYJ5Y7AH.js";import{Ab as x,Kb as r,Lb as p,Ob as y,Pb as C,Qa as a,Qb as w,Sb as B,Tb as T,Ub as E,Vb as M,Y as d,ba as S,fb as h,hb as c,ka as u,la as g,mb as b,qb as i,rb as n,sb as f,wb as v,zb as _}from"./chunk-PSXZOWGB.js";import"./chunk-PSFXZ2QL.js";var K=()=>({"min-width":"50rem"}),Q=t=>["/dashboard/menu/edit-darna-blogs",t],U=(t,l)=>({"bg-green-100 border-green-400 text-green-700":t,"bg-red-100 border-red-400 text-red-700":l});function X(t,l){t&1&&(i(0,"tr")(1,"th"),r(2,"English Title"),n(),i(3,"th"),r(4,"Arabic Title"),n(),i(5,"th"),r(6,"Active Status"),n(),i(7,"th"),r(8,"Actions"),n()())}function Y(t,l){if(t&1){let e=v();i(0,"tr")(1,"td"),r(2),n(),i(3,"td"),r(4),n(),i(5,"td")(6,"p-inputSwitch",8),w("ngModelChange",function(o){let m=u(e).$implicit;return C(m.active_status,o)||(m.active_status=o),g(o)}),_("onChange",function(o){let m=u(e).$implicit,J=x();return g(J.onStatusChange(m,o))}),n()(),i(7,"td"),f(8,"p-button",9),n()()}if(t&2){let e=l.$implicit;a(2),p(e.en_blog_title),a(2),p(e.ar_blog_title),a(2),y("ngModel",e.active_status),c("trueValue","1")("falseValue","0"),a(2),c("routerLink",E(6,Q,e.id))}}function Z(t,l){if(t&1&&(i(0,"div",7)(1,"strong",10),r(2),n(),i(3,"span",11),r(4),n()()),t&2){let e=x();c("ngClass",M(3,U,e.message.type==="success",e.message.type==="error")),a(2),p(e.message.type==="success"?"Success!":"Error!"),a(2),p(e.message.text)}}var xe=(()=>{class t{constructor(){this.blogsService=d($),this.ngxSpinnerService=d(F),this.router=d(L),this.blogs=[],this.message={text:"",type:""}}ngOnInit(){this.loadBlogs()}loadBlogs(){this.ngxSpinnerService.show("actionsLoader"),this.blogsService.getAll().subscribe({next:e=>{this.blogs=e.data,this.ngxSpinnerService.hide("actionsLoader")},error:()=>{this.message={text:"Failed to load blogs",type:"error"},this.ngxSpinnerService.hide("actionsLoader"),setTimeout(()=>this.message={text:"",type:""},5e3)}})}onStatusChange(e,s){this.ngxSpinnerService.show("actionsLoader"),(e.active_status==="1"?this.blogsService.enable(e.id):this.blogsService.disable(e.id)).subscribe({next:()=>{this.message={text:e.active_status==="1"?"Blog enabled successfully":"Blog disabled successfully",type:"success"},this.ngxSpinnerService.hide("actionsLoader"),setTimeout(()=>this.message={text:"",type:""},5e3)},error:()=>{e.active_status=e.active_status==="1"?"0":"1",this.message={text:"Failed to update status",type:"error"},this.ngxSpinnerService.hide("actionsLoader"),setTimeout(()=>this.message={text:"",type:""},5e3)}})}static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275cmp=S({type:t,selectors:[["app-all-darna-blogs"]],standalone:!0,features:[B],decls:9,vars:4,consts:[[1,"flex","justify-center","items-center","min-h-screen"],[1,"card","w-full","max-w-4xl"],[1,"card-title","text-center","mb-6"],["pButton","","label","Add Blog","icon","pi pi-plus",1,"my-4",3,"click"],[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],["role","alert",1,"border","px-4","py-3","rounded","relative","mb-4","max-w-4xl","mx-auto",3,"ngClass"],[3,"ngModelChange","onChange","ngModel","trueValue","falseValue"],["icon","pi pi-pencil","styleClass","p-button-text",3,"routerLink"],[1,"font-bold"],[1,"block","sm:inline","ml-2"]],template:function(s,o){s&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),r(3,"Blogs List"),n(),i(4,"button",3),_("click",function(){return o.router.navigate(["/dashboard/menu/add-darna-blogs"])}),n(),i(5,"p-table",4),h(6,X,9,0,"ng-template",5)(7,Y,9,8,"ng-template",6),n()()(),h(8,Z,5,6,"div",7)),s&2&&(a(5),c("value",o.blogs)("tableStyle",T(3,K)),a(3),b(8,o.message.text?8:-1))},dependencies:[D,A,V,k,H,G,I,z,q,O,P,R,j,N,W],encapsulation:2})}}return t})();export{xe as AllDarnaBlogsComponent};
