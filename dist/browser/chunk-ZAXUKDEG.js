import{a as b}from"./chunk-PULJ7UNU.js";import{b as I}from"./chunk-WQRK5NAT.js";import{b as x}from"./chunk-CQOJENEW.js";import{a as S}from"./chunk-OOHQEE5L.js";import"./chunk-S7DFJDHE.js";import"./chunk-ZH6D4JNL.js";import"./chunk-LV7JVZMU.js";import"./chunk-4WY6IZPL.js";import{e as v}from"./chunk-WDDFHKIH.js";import{b as g}from"./chunk-NZNLV7ZF.js";import{b as M}from"./chunk-AGVKSH7H.js";import{q as y}from"./chunk-V2NMUT4R.js";import{a as f}from"./chunk-KEBJO4LJ.js";import{e as q}from"./chunk-PEYIU4ER.js";import"./chunk-RJZ3H7D5.js";import"./chunk-5YI4S6VK.js";import{f as _}from"./chunk-PXM2JOVS.js";import{x as d}from"./chunk-27E65EIB.js";import{b as p,d as h}from"./chunk-67M3DXMG.js";import{n as m}from"./chunk-FYJ5Y7AH.js";import{Ra as r,Rb as u,Sb as c,ba as l,hb as o,sb as s}from"./chunk-PSXZOWGB.js";import"./chunk-PSFXZ2QL.js";var $=(()=>{class i{constructor(e,t,a,n,E,D){this.route=e,this.router=t,this.validationService=a,this.ngxSpinnerService=n,this.medicalRequestsService=E,this.messageService=D,this.formFields=[],this.isEditMode=!1,this.editData=null,this.medicalRequestId=null,this.medicalInsurances=[],this.medicalInsuranceOptions=[],this.extraFormData={}}ngOnInit(){this.medicalRequestId=this.route.snapshot.paramMap.get("id"),this.isEditMode=!!this.medicalRequestId,this.route.data.subscribe({next:e=>{e&&(this.medicalInsurances=e.data?.medicalInsurances?.data||[],console.log("data",this.medicalInsurances),this.isEditMode&&e.data?.medicalRequest&&(this.editData=e.data?.medicalRequest?.data,this.editData?.medical_insurance_id&&(this.editData.medical_insurance_id=Number(this.editData.medical_insurance_id)),this.editData&&(this.extraFormData={user_id:this.editData.user_id,medical_insurance_id:this.editData.medical_insurance_id,payment_method:this.editData.payment_method||"Cash"})),this.medicalInsuranceOptions=this.medicalInsurances.map(t=>({label:`${t.company_name} - ${t.en_title}`,value:t.id.toString()})),console.log(e?.data?.medicalRequest?.data),this.initializeFields(e?.data?.medicalRequest?.data?.request_type),this.ngxSpinnerService.hide("actionsLoader"))},error:e=>{console.error("Failed to load data",e),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load required data"}),this.ngxSpinnerService.hide("actionsLoader")},complete:()=>{this.ngxSpinnerService.hide("actionsLoader")}})}initializeFields(e){let t=this.isEditMode&&this.editData?this.editData.active_status:null,a=[{label:"Requested",value:"requested"},{label:"Pending",value:"pending"},{label:"Confirmed",value:"confirmed"},{label:"Canceled",value:"canceled"}].filter(n=>t!=="confirmed"||n.value!=="canceled");e==="corporate-empolyee"||e==="corporate"?this.formFields=[{name:"admin_medical_insurance_number",label:"Admin Medical Insurance Number",type:"text",required:!0,placeholder:"Enter Admin Medical Insurance Number"},{name:"start_date",label:"Start Date",type:"date",required:!0,placeholder:"Select Start Date",showIf:{filed:"active_status",value:"confirmed"}},{name:"duration",label:"Duration (Years)",type:"dropdown",required:!0,placeholder:"Enter Duration in Years",showIf:{filed:"active_status",value:"confirmed"}},{name:"company_address",label:"Company Address",type:"text",required:!0,disabled:!0,placeholder:"Enter address"},{name:"company_employee_number",label:"Number Of Employee",type:"text",required:!0,disabled:!0,placeholder:"Enter address"},{name:"company_name",label:"Company Name",type:"text",required:!0,disabled:!0,placeholder:"Enter address"},{name:"end_date",label:"End Date",type:"date",required:!0,placeholder:"Select End Date"},{name:"active_status",label:"Status",type:"dropdown",required:!0,options:a,placeholder:"Select Status"},{name:"medical_insurance_number",label:"Medical Insurance Number",type:"text",required:!0,placeholder:"Enter Medical Insurance Number",disabled:!0},{name:"name",label:"Name",type:"text",required:!0,placeholder:"Enter Name",disabled:!0},{name:"email",label:"Email",type:"text",required:!0,placeholder:"Enter Email",disabled:!0},{name:"phone",label:"Phone",type:"text",required:!0,placeholder:"Enter Phone Number",disabled:!0},{name:"medical_insurance_id",label:"Medical Insurance",type:"dropdown",required:!0,options:this.medicalInsuranceOptions,placeholder:"Select Medical Insurance",disabled:!0},{name:"payment_method",label:"Payment Method",type:"text",required:!0,placeholder:"Select Payment Method",disabled:!0}]:this.formFields=[{name:"admin_medical_insurance_number",label:"Admin Medical Insurance Number",type:"text",required:!0,placeholder:"Enter Admin Medical Insurance Number"},{name:"start_date",label:"Start Date",type:"date",required:!0,placeholder:"Select Start Date",showIf:{filed:"active_status",value:"confirmed"}},{name:"duration",label:"Duration (Years)",type:"dropdown",required:!0,placeholder:"Enter Duration in Years",showIf:{filed:"active_status",value:"confirmed"}},{name:"end_date",label:"End Date",type:"date",required:!0,placeholder:"Select End Date"},{name:"active_status",label:"Status",type:"dropdown",required:!0,options:a,placeholder:"Select Status"},{name:"medical_insurance_number",label:"Medical Insurance Number",type:"text",required:!0,placeholder:"Enter Medical Insurance Number",disabled:!0},{name:"name",label:"Name",type:"text",required:!0,placeholder:"Enter Name",disabled:!0},{name:"email",label:"Email",type:"text",required:!0,placeholder:"Enter Email",disabled:!0},{name:"phone",label:"Phone",type:"text",required:!0,placeholder:"Enter Phone Number",disabled:!0},{name:"birthdate",label:"Birthdate",type:"date",required:!0,disabled:!0,placeholder:"Select Birthdate"},{name:"gender",label:"Gender",type:"dropdown",required:!0,options:[{label:"Male",value:"male"},{label:"Female",value:"female"}],placeholder:"Select Gender",disabled:!0},{name:"medical_insurance_id",label:"Medical Insurance",type:"dropdown",required:!0,options:this.medicalInsuranceOptions,placeholder:"Select Medical Insurance",disabled:!0},{name:"payment_method",label:"Payment Method",type:"text",required:!0,placeholder:"Select Payment Method",disabled:!0}]}static{this.\u0275fac=function(t){return new(t||i)(r(p),r(h),r(S),r(f),r(b),r(d))}}static{this.\u0275cmp=l({type:i,selectors:[["app-add-edit-medical-requests"]],standalone:!0,features:[u([d]),c],decls:1,vars:9,consts:[[3,"fields","entityType","title","redirectRoute","isEdit","editData","extraFormData","category","changeStatus"]],template:function(t,a){t&1&&s(0,"app-generic-form",0),t&2&&o("fields",a.formFields)("entityType","medical-requests")("title",a.isEditMode?"Edit Medical Request":"Add Medical Request")("redirectRoute","/dashboard/menu/medical-requests")("isEdit",a.isEditMode)("editData",a.editData)("extraFormData",a.extraFormData)("category","medical")("changeStatus",!0)},dependencies:[m,y,v,M,I,g,_,q,x],styles:["[_nghost-%COMP%]     .p-dropdown{width:100%;height:50px;background:#fff;border-radius:12px;padding:0 20px;color:#1f2937;transition:all .2s ease;border:1px solid rgba(0,0,0,.285)}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{font-size:16px;color:#6b7280;margin-top:1px}[_nghost-%COMP%]     .p-dropdown-trigger{background:transparent;border:none;position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#6b7280}[_nghost-%COMP%]     .p-calendar{width:100%}[_nghost-%COMP%]     .p-calendar .p-inputtext{width:100%;height:50px;border-radius:12px;padding:0 20px;color:#1f2937;transition:all .2s ease;border:1px solid rgba(0,0,0,.285);font-size:16px}[_nghost-%COMP%]     .p-calendar .p-inputtext::placeholder{color:#6b7280}[_nghost-%COMP%]     .p-calendar .p-datepicker-trigger{background:transparent;border:none;position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#6b7280}"]})}}return i})();export{$ as AddEditMedicalRequestsComponent};
