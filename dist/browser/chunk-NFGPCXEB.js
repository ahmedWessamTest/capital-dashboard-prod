import{a as R}from"./chunk-4IMXXL2Z.js";import{b as ie}from"./chunk-WQRK5NAT.js";import{d as ee,e as te}from"./chunk-WDDFHKIH.js";import{b as X}from"./chunk-NZNLV7ZF.js";import{a as Q,b as W}from"./chunk-AGVKSH7H.js";import{b as B,c as h,e as G,f as L,k as V,m as K,n as O,o as $,q as z}from"./chunk-V2NMUT4R.js";import{a as j,c as P}from"./chunk-KEBJO4LJ.js";import{d as Y,e as Z}from"./chunk-PEYIU4ER.js";import"./chunk-RJZ3H7D5.js";import"./chunk-5YI4S6VK.js";import{e as H,f as J}from"./chunk-PXM2JOVS.js";import{x as T}from"./chunk-27E65EIB.js";import{d as k}from"./chunk-67M3DXMG.js";import{h as I,n as D}from"./chunk-FYJ5Y7AH.js";import{Ab as E,Kb as m,Qa as o,Rb as w,Sb as q,Ub as b,Y as _,ba as N,fb as s,hb as u,jb as U,mb as d,qb as n,rb as i,sb as p,zb as M}from"./chunk-PSXZOWGB.js";import"./chunk-PSFXZ2QL.js";var A=t=>({"ng-invalid ng-dirty":t}),re=t=>({"cursor-disabled-drop":t});function le(t,c){t&1&&(n(0,"small",9),m(1,"Name is required."),i())}function ne(t,c){t&1&&m(0," Phone must be 11 digits. ")}function oe(t,c){if(t&1&&(n(0,"small",9),s(1,ne,1,0),i()),t&2){let r,l=E();o(),d(1,!((r=l.userForm.get("phone"))==null||r.errors==null)&&r.errors.pattern?1:-1)}}function me(t,c){t&1&&(n(0,"small",16),m(1,"Role is required."),i())}function ae(t,c){t&1&&m(0," Email is required. ")}function se(t,c){t&1&&m(0," Please enter a valid email. ")}function ue(t,c){if(t&1&&(n(0,"small",9),s(1,ae,1,0)(2,se,1,0),i()),t&2){let r,l=E();o(),d(1,!((r=l.userForm.get("email"))==null||r.errors==null)&&r.errors.required?1:!((r=l.userForm.get("email"))==null||r.errors==null)&&r.errors.email?2:-1)}}var qe=(()=>{class t{constructor(){this.isSubmitting=!1,this.roles=[{label:"User",value:"user"},{label:"Admin",value:"admin"},{label:"Employee",value:"employee"}],this.fb=_($),this.router=_(k),this.ngxSpinnerService=_(j),this.messageService=_(T),this.userService=_(R),this.userForm=this.fb.group({name:["",h.required],email:["",[h.required,h.email]],en_job:[""],ar_job:[""],phone:["",[h.pattern("^\\d{11}$")]],en_text:[""],ar_text:[""],role:["",h.required]})}onSubmit(){if(this.userForm.invalid){this.userForm.markAllAsTouched();return}this.isSubmitting=!0,this.ngxSpinnerService.show("actionsLoader");let r=this.userForm.value;this.userService.create(r).subscribe({next:l=>{this.messageService.add({severity:"success",summary:"Success",detail:"User added successfully"}),this.isSubmitting=!1,this.ngxSpinnerService.hide("actionsLoader"),this.router.navigate(["/dashboard/menu/all-users"])},error:l=>{let e="Failed to add user";if(l.error?.errors){let a=Object.keys(l.error.errors)[0];e=l.error.errors[a]?.[0]||e}this.messageService.add({severity:"error",summary:"Error",detail:e}),this.isSubmitting=!1,this.ngxSpinnerService.hide("actionsLoader")}})}static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275cmp=N({type:t,selectors:[["app-add-user"]],standalone:!0,features:[w([T]),q],decls:32,vars:26,consts:[[1,"card"],[1,"text-2xl","font-semibold","mb-4"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","gap-4","mb-4"],[1,"p-4","border","rounded"],[1,"text-lg","font-medium","mb-4"],[1,"flex","flex-col","mb-3","h-20"],["for","name",1,"block","text-sm","font-medium","mb-1"],["id","name","type","text","pInputText","","formControlName","name",1,"w-full","h-10",3,"ngClass"],[1,"mt-1","text-red-500"],["for","phone",1,"block","text-sm","font-medium","mb-1"],["id","phone","type","text","pInputText","","formControlName","phone",1,"w-full","h-10",3,"ngClass"],[1,"form-control-container","flex-1"],["for","role",1,"flex","items-center","gap-1","mx-2","mb-2","font-semibold"],[1,"h-20"],["id","role","optionLabel","label","optionValue","value",1,"w-full",3,"ngClass","formControlName","options","placeholder","disabled"],[1,"text-red-500","form-error"],["for","email",1,"block","text-sm","font-medium","mb-1"],["id","email","type","email","pInputText","","formControlName","email",1,"w-full","h-10",3,"ngClass"],[1,"flex","justify-end"],["type","submit","label","Add User","icon","pi pi-check",1,"btn-main",3,"disabled"]],template:function(l,e){if(l&1&&(n(0,"div",0)(1,"h2",1),m(2,"Add User"),i(),n(3,"form",2),M("ngSubmit",function(){return e.onSubmit()}),n(4,"div",3)(5,"div",4)(6,"h3",5),m(7,"Basic Information"),i(),n(8,"div",6)(9,"label",7),m(10,"Name *"),i(),p(11,"input",8),s(12,le,2,0,"small",9),i(),n(13,"div",6)(14,"label",10),m(15,"Phone"),i(),p(16,"input",11),s(17,oe,2,1,"small",9),i(),n(18,"div",12)(19,"label",13),m(20,"Role *"),i(),n(21,"div",14),p(22,"p-dropdown",15),s(23,me,2,0,"small",16),i()(),n(24,"div",6)(25,"label",17),m(26,"Email *"),i(),p(27,"input",18),s(28,ue,3,1,"small",9),i()()(),n(29,"div",19),p(30,"p-button",20),i()()(),p(31,"p-toast")),l&2){let a,v,S,C,F,f,g,x,y;o(3),u("formGroup",e.userForm),o(8),u("ngClass",b(18,A,((a=e.userForm.get("name"))==null?null:a.touched)&&((a=e.userForm.get("name"))==null?null:a.invalid))),o(),d(12,(v=e.userForm.get("name"))!=null&&v.touched&&(!((v=e.userForm.get("name"))==null||v.errors==null)&&v.errors.required)?12:-1),o(4),u("ngClass",b(20,A,((S=e.userForm.get("phone"))==null?null:S.touched)&&((S=e.userForm.get("phone"))==null?null:S.invalid))),o(),d(17,(C=e.userForm.get("phone"))!=null&&C.touched&&((C=e.userForm.get("phone"))!=null&&C.errors)?17:-1),o(5),U("ng-dirty",((F=e.userForm.get("role"))==null?null:F.dirty)||((F=e.userForm.get("role"))==null?null:F.touched))("ng-invalid",((f=e.userForm.get("role"))==null?null:f.invalid)&&(((f=e.userForm.get("role"))==null?null:f.dirty)||((f=e.userForm.get("role"))==null?null:f.touched))),u("ngClass",b(22,re,e.isSubmitting))("formControlName","role")("options",e.roles)("placeholder","Select Role")("disabled",e.isSubmitting),o(),d(23,(g=e.userForm.get("role"))!=null&&g.invalid&&((g=e.userForm.get("role"))!=null&&g.dirty||(g=e.userForm.get("role"))!=null&&g.touched)?23:-1),o(4),u("ngClass",b(24,A,((x=e.userForm.get("email"))==null?null:x.touched)&&((x=e.userForm.get("email"))==null?null:x.invalid))),o(),d(28,(y=e.userForm.get("email"))!=null&&y.touched&&((y=e.userForm.get("email"))!=null&&y.errors)?28:-1),o(2),u("disabled",e.userForm.invalid||e.isSubmitting)}},dependencies:[z,V,B,G,L,K,O,J,H,W,Q,ie,X,Z,Y,te,ee,D,I,P]})}}return t})();export{qe as AddUserComponent};
