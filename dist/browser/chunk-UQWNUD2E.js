import{a as ei}from"./chunk-4JHUVNNE.js";import{a as Y}from"./chunk-ZH6D4JNL.js";import{a as W,b as K}from"./chunk-AGVKSH7H.js";import{b as V,c as y,e as $,f as G,k as U,m as O,n as z,o as R,q as Z}from"./chunk-V2NMUT4R.js";import{a as ii}from"./chunk-2O7EOZOI.js";import{a as B,c as k}from"./chunk-KEBJO4LJ.js";import{d as Q,e as X}from"./chunk-PEYIU4ER.js";import{a as q}from"./chunk-RJZ3H7D5.js";import"./chunk-5YI4S6VK.js";import{d as H,f as J}from"./chunk-PXM2JOVS.js";import{x as F}from"./chunk-27E65EIB.js";import{h as A,n as M,r as j}from"./chunk-FYJ5Y7AH.js";import{Ab as S,Kb as a,Qa as l,Rb as D,S as b,Sb as N,Tb as x,Ub as P,X as C,Y as v,ba as E,fb as m,gb as _,hb as d,ka as T,la as w,mb as p,qb as t,rb as n,sb as c,wb as L,zb as I}from"./chunk-PSXZOWGB.js";import"./chunk-PSFXZ2QL.js";var ti=(()=>{class e{constructor(i){this.http=i,this.baseUrl=q}getPrivacyPolicy(){return this.http.get(`${this.baseUrl}privacy-policy`)}updatePrivacyPolicy(i){return this.http.post(`${this.baseUrl}privacy-policy`,i)}static{this.\u0275fac=function(r){return new(r||e)(C(j))}}static{this.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var oi=()=>({language:"en",direction:"ltr",height:400}),ri=e=>({"p-invalid":e}),ai=()=>({language:"ar",direction:"rtl",height:400});function li(e,u){e&1&&(t(0,"small",11),a(1,"English Title is required"),n())}function si(e,u){e&1&&(t(0,"small",11),a(1,"Arabic Title is required"),n())}function ci(e,u){e&1&&(t(0,"small",11),a(1,"English Description is required"),n())}function mi(e,u){e&1&&(t(0,"small",11),a(1,"Arabic Description is required"),n())}function di(e,u){if(e&1){let i=L();t(0,"h2",2),a(1,"Privacy Policy Information"),n(),t(2,"form",3),I("ngSubmit",function(){T(i);let s=S();return w(s.onSubmit())}),t(3,"div",4)(4,"h3",5),a(5,"Title"),n(),t(6,"div",6)(7,"label",7),a(8,"English Title"),n(),t(9,"div",8),c(10,"input",9),n(),t(11,"div",10),m(12,li,2,0,"small",11),n()(),t(13,"div",6)(14,"label",12),a(15,"Arabic Title"),n(),t(16,"div",8),c(17,"input",13),n(),t(18,"div",10),m(19,si,2,0,"small",11),n()(),t(20,"h3",5),a(21,"Description"),n(),t(22,"div",6)(23,"label",14),a(24,"English Description"),n(),t(25,"div",8),c(26,"ngx-jodit",15),n(),t(27,"div",10),m(28,ci,2,0,"small",11),n()(),t(29,"div",6)(30,"label",16),a(31,"Arabic Description"),n(),t(32,"div",8),c(33,"ngx-jodit",17),n(),t(34,"div",10),m(35,mi,2,0,"small",11),n()()(),t(36,"div",18),c(37,"button",19),n()()}if(e&2){let i,r,s,f,h,g,o=S();l(2),d("formGroup",o.privacyForm),l(10),p(12,(i=o.privacyForm.get("en_title"))!=null&&i.invalid&&((i=o.privacyForm.get("en_title"))!=null&&i.touched)?12:-1),l(7),p(19,(r=o.privacyForm.get("ar_title"))!=null&&r.invalid&&((r=o.privacyForm.get("ar_title"))!=null&&r.touched)?19:-1),l(7),d("options",x(13,oi))("ngClass",P(14,ri,((s=o.privacyForm.get("en_description"))==null?null:s.touched)&&((s=o.privacyForm.get("en_description"))==null?null:s.invalid))),_("disabled",o.isLoading?!0:null),l(2),p(28,(f=o.privacyForm.get("en_description"))!=null&&f.invalid&&((f=o.privacyForm.get("en_description"))!=null&&f.touched)?28:-1),l(5),d("options",x(16,ai))("ngClass",P(17,ri,((h=o.privacyForm.get("ar_description"))==null?null:h.touched)&&((h=o.privacyForm.get("ar_description"))==null?null:h.invalid))),_("disabled",o.isLoading?!0:null),l(2),p(35,(g=o.privacyForm.get("ar_description"))!=null&&g.invalid&&((g=o.privacyForm.get("ar_description"))!=null&&g.touched)?35:-1),l(2),d("disabled",o.privacyForm.invalid||o.isLoading)("icon",o.isLoading?"pi pi-spin pi-spinner mx-2":"")}}function pi(e,u){e&1&&c(0,"app-loading-data-banner",20)}var Mi=(()=>{class e{constructor(){this.fb=v(R),this.privacyPolicyService=v(ti),this.ngxSpinnerService=v(B),this.messageService=v(F),this.privacyForm=null,this.originalData=null,this.isLoading=!1,this.messages=[]}ngOnInit(){this.loadPrivacyPolicyInfo()}loadPrivacyPolicyInfo(){this.isLoading=!0,this.ngxSpinnerService.show("actionsLoader"),this.privacyPolicyService.getPrivacyPolicy().subscribe({next:i=>{this.originalData=i,this.initializeForm(i.data),this.ngxSpinnerService.hide("actionsLoader"),this.isLoading=!1},error:()=>{this.ngxSpinnerService.hide("actionsLoader"),this.isLoading=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load Privacy Policy information"}),this.messages=[{severity:"error",summary:"Error",detail:"Failed to load Privacy Policy information"}]}})}initializeForm(i){this.privacyForm=this.fb.group({en_title:[i.en_title||"",y.required],ar_title:[i.ar_title||"",y.required],en_description:[i.en_description||"",y.required],ar_description:[i.ar_description||"",y.required]})}onSubmit(){if(!this.privacyForm?.dirty){this.messageService.add({severity:"info",summary:"Info",detail:"No changes to save"}),this.messages=[{severity:"info",summary:"Info",detail:"No changes to save"}];return}if(this.privacyForm?.valid){this.isLoading=!0,this.ngxSpinnerService.show("actionsLoader");let i=new FormData;Object.keys(this.privacyForm.value).forEach(r=>{i.append(r,this.privacyForm.value[r])}),this.privacyPolicyService.updatePrivacyPolicy(i).subscribe({next:r=>{this.ngxSpinnerService.hide("actionsLoader"),this.isLoading=!1,this.messageService.add({severity:"success",summary:"Success",detail:r.message}),this.messages=[{severity:"success",summary:"Success",detail:r.message}],this.privacyForm?.markAsPristine()},error:()=>{this.ngxSpinnerService.hide("actionsLoader"),this.isLoading=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update Privacy Policy information"}),this.messages=[{severity:"error",summary:"Error",detail:"Failed to update Privacy Policy information"}]}})}else{this.privacyForm?.markAllAsTouched();let i=Object.keys(this.privacyForm?.controls||{}).filter(r=>this.privacyForm?.get(r)?.invalid).map(r=>`${r.replace(/_/g," ")} is required`);this.messageService.add({severity:"error",summary:"Error",detail:`Invalid fields: ${i.join(", ")}`}),this.messages=[{severity:"error",summary:"Error",detail:`Invalid fields: ${i.join(", ")}`}]}}markAsTouched(i){this.privacyForm?.get(i)?.markAsTouched()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=E({type:e,selectors:[["app-privacy-policy"]],standalone:!0,features:[D([F]),N],decls:4,vars:2,consts:[["position","top-right",3,"baseZIndex"],[1,"privacy-policy-control","p-4","w-full"],[1,"mb-4"],[1,"w-full",3,"ngSubmit","formGroup"],[1,"privacy-policy-items","w-full"],[1,"mt-4","mb-3"],[1,"privacy-policy-item","w-full"],["for","en_title",1,"font-medium"],[1,"input-container","w-full"],["id","en_title","type","text","pInputText","","formControlName","en_title","placeholder","Enter English Title",1,"w-full"],[1,"error-container"],[1,"error-message"],["for","ar_title",1,"font-medium"],["id","ar_title","type","text","pInputText","","formControlName","ar_title","placeholder","Enter Arabic Title",1,"w-full"],["for","en_description",1,"font-medium"],["id","en_description","formControlName","en_description","placeholder","Enter English Description",1,"w-full","rich-text-content",3,"options","ngClass"],["for","ar_description",1,"font-medium"],["id","ar_description","formControlName","ar_description","placeholder","Enter Arabic Description",1,"w-full","rich-text-content",3,"options","ngClass"],[1,"mt-4","w-full"],["pButton","","type","submit","label","Save Changes",1,"btn-main","px-3","w-full",3,"disabled","icon"],[1,"w-full"]],template:function(r,s){r&1&&(c(0,"p-toast",0),t(1,"div",1),m(2,di,38,19)(3,pi,1,0),n()),r&2&&(d("baseZIndex",5e3),l(2),p(2,s.privacyForm?2:3))},dependencies:[ii,M,A,Z,U,V,$,G,O,z,X,Q,k,J,H,K,W,ei,Y]})}}return e})();export{Mi as PrivacyPolicyComponent};
