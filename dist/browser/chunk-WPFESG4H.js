import{a as Y}from"./chunk-CC6IAZBT.js";import{a as be,b as he}from"./chunk-WQRK5NAT.js";import{a as Z}from"./chunk-DCM55A5P.js";import{a as _e}from"./chunk-S7DFJDHE.js";import{a as pe}from"./chunk-ZH6D4JNL.js";import{a as ce,b as ue}from"./chunk-NZNLV7ZF.js";import{a as me,b as ge}from"./chunk-AGVKSH7H.js";import{b as ee,c as g,e as te,f as ie,k as ne,m as oe,n as ae,o as re,q as le}from"./chunk-V2NMUT4R.js";import{a as Q,b as W,c as X}from"./chunk-KEBJO4LJ.js";import{b as K}from"./chunk-RJZ3H7D5.js";import{e as se,f as de}from"./chunk-PXM2JOVS.js";import"./chunk-27E65EIB.js";import{b as $,d as H,e as J}from"./chunk-67M3DXMG.js";import{h as G,j as R,n as j}from"./chunk-FYJ5Y7AH.js";import{Ab as O,Kb as a,Lb as v,Qa as r,Ra as V,Rb as z,Sb as k,Tb as q,Ub as b,Vb as U,Y as f,ba as N,fb as c,gb as L,hb as s,mb as u,qb as t,rb as i,sb as _,zb as P}from"./chunk-PSXZOWGB.js";import"./chunk-PSFXZ2QL.js";var h=n=>({"p-invalid":n}),fe=()=>({language:"ar",direction:"rtl",height:400}),ve=()=>["/dashboard/menu/blogs-arabic"],Se=(n,d)=>({"bg-green-100 border-green-400 text-green-700":n,"bg-red-100 border-red-400 text-red-700":d});function xe(n,d){n&1&&(t(0,"small",13),a(1,"Arabic Blog Title is required"),i())}function Ce(n,d){n&1&&(t(0,"small",13),a(1,"Arabic Blog Content is required"),i())}function Ee(n,d){n&1&&(t(0,"small",13),a(1,"Arabic Meta Title is required"),i())}function Fe(n,d){n&1&&(t(0,"small",13),a(1,"Arabic Meta Description is required"),i())}function Ae(n,d){n&1&&(t(0,"small",13),a(1,"Arabic First Script Text is required"),i())}function Me(n,d){n&1&&(t(0,"small",13),a(1,"Arabic Second Script Text is required"),i())}function Ie(n,d){n&1&&(t(0,"small",13),a(1,"Blog Date is required"),i())}function ye(n,d){n&1&&(t(0,"small",13),a(1,"Selected date is in the past. Please choose today or a future date."),i())}function Te(n,d){if(n&1&&(t(0,"div",8)(1,"label",36),a(2,"Blog Date"),i(),t(3,"div",10),_(4,"input",37),i(),t(5,"div",12),c(6,Ie,2,0,"small",13)(7,ye,2,0,"small",13),i()()),n&2){let o,m,e,l=O();r(4),s("min",l.isEditMode?null:l.minDate)("ngClass",b(5,h,((o=l.blogForm.get("blog_date"))==null?null:o.touched)&&((o=l.blogForm.get("blog_date"))==null?null:o.invalid)))("disabled",l.isSubmitting),r(2),u(6,(m=l.blogForm.get("blog_date"))!=null&&m.touched&&((m=l.blogForm.get("blog_date"))!=null&&m.hasError("required"))?6:-1),r(),u(7,!l.isEditMode&&((e=l.blogForm.get("blog_date"))!=null&&e.touched)&&((e=l.blogForm.get("blog_date"))!=null&&e.hasError("pastDate"))?7:-1)}}function we(n,d){n&1&&(t(0,"small",13),a(1,"Status is required"),i())}function Be(n,d){n&1&&(t(0,"small",13),a(1,"Main Image is required"),i())}function Pe(n,d){if(n&1&&(t(0,"div",35)(1,"strong",38),a(2),i(),t(3,"span",39),a(4),i()()),n&2){let o=O();s("ngClass",U(3,Se,o.message.type==="success",o.message.type==="error")),r(2),v(o.message.type==="success"?"Success!":"Error!"),r(2),v(o.message.text)}}function Oe(n){let d=new Date(n.value),o=new Date;return o.setHours(0,0,0,0),d<o?{pastDate:!0}:null}var nt=(()=>{class n{constructor(o){this.NormalizeActiveStatusService=o,this.router=f(H),this.fb=f(re),this.arabicBlogsService=f(Y),this.ngxSpinnerService=f(Q),this.route=f($),this.isSubmitting=!1,this.addedImages=[],this.removedImages=[],this.isEditMode=!1,this.blogId=null,this.initialImages=[],this.IMAGE_BASE_URL=K,this.minDate=new Date().toISOString().split("T")[0],this.message={text:"",type:""}}ngOnInit(){this.ngxSpinnerService.show("actionsLoader"),this.initializeForm(),this.checkMode()}initializeForm(){this.blogForm=this.fb.group({ar_blog_title:["",g.required],ar_blog_text:["",g.required],ar_meta_title:["",g.required],ar_meta_text:["",g.required],ar_first_script_text:["",g.required],ar_second_script_text:["",g.required],blog_date:["",[g.required,Oe]],active_status:[!0,g.required],main_image:[null,g.required]}),this.blogForm.markAsPristine()}checkMode(){this.route.url.subscribe(o=>{this.isEditMode=o.some(m=>m.path.includes("edit")),this.isEditMode?(this.blogId=this.route.snapshot.paramMap.get("id"),this.blogId&&this.loadBlogData()):(this.initialImages=[],this.ngxSpinnerService.hide("actionsLoader"))})}loadBlogData(){this.route.data.subscribe({next:o=>{let e=o.data.data,l=new Date().toISOString();this.initialImages=e.main_image?[{id:`temp-${Date.now()}`,product_id:0,image:this.IMAGE_BASE_URL+e.main_image,thumb:this.IMAGE_BASE_URL+e.main_image,medium:this.IMAGE_BASE_URL+e.main_image,order_view:0,is_main:!0,active_status:!0,created_at:l,updated_at:l}]:[],this.blogForm.patchValue({ar_blog_title:e.ar_blog_title,ar_blog_text:e.ar_blog_text,ar_meta_title:e.ar_meta_title,ar_meta_text:e.ar_meta_text,ar_first_script_text:e.ar_first_script_text,ar_second_script_text:e.ar_second_script_text,blog_date:e.blog_date,active_status:this.NormalizeActiveStatusService.normalizeActiveStatus(e.active_status),main_image:e.main_image}),this.blogForm.get("blog_date")?.setValidators([g.required]),this.blogForm.get("blog_date")?.updateValueAndValidity(),this.blogForm.get("main_image")?.clearValidators(),this.blogForm.get("main_image")?.updateValueAndValidity(),this.ngxSpinnerService.hide("actionsLoader")},error:o=>{this.message={text:o.error?.message||"Failed to load blog data",type:"error"},window.scrollTo({top:0,behavior:"smooth"}),this.ngxSpinnerService.hide("actionsLoader"),setTimeout(()=>{this.message={text:"",type:""}},5e3)}})}onImagesChanged(o){if(this.addedImages=o.added,this.removedImages=o.removed,this.addedImages.length>0)this.blogForm.patchValue({main_image:this.addedImages[0]}),this.blogForm.get("main_image")?.setValidators([g.required]);else if(this.isEditMode&&this.initialImages.length>0&&this.removedImages.length===0){let m=this.initialImages[0].image.replace(this.IMAGE_BASE_URL,"");this.blogForm.patchValue({main_image:m}),this.blogForm.get("main_image")?.clearValidators()}else this.blogForm.patchValue({main_image:null}),this.blogForm.get("main_image")?.setValidators([g.required]);this.blogForm.get("main_image")?.updateValueAndValidity()}onActiveStatusChange(o){this.blogForm.patchValue({active_status:!!o.checked})}onSubmit(){if(this.blogForm.invalid){this.blogForm.markAllAsTouched(),window.scrollTo({top:0,behavior:"smooth"});return}this.isSubmitting=!0,this.blogForm.disable(),this.ngxSpinnerService.show("actionsLoader"),this.message={text:"",type:""};let o=this.blogForm.value;o.active_status=this.blogForm.value.active_status?"1":"0",(this.isEditMode&&this.blogId?this.arabicBlogsService.update(+this.blogId,o):this.arabicBlogsService.create(o)).subscribe({next:e=>{this.message={text:`Blog ${this.isEditMode?"Updated":"Added"} Successfully`,type:"success"},this.blogForm.reset(),this.blogForm.markAsPristine(),this.addedImages=[],this.removedImages=[],this.initialImages=[],this.isSubmitting=!1,this.blogForm.enable(),window.scrollTo({top:0,behavior:"smooth"}),this.ngxSpinnerService.hide("actionsLoader"),setTimeout(()=>{this.router.navigate(["/dashboard/menu/ar-blogs"]),this.message={text:"",type:""}},1e3)},error:e=>{let l=e.error?.message||`Failed to ${this.isEditMode?"update":"create"} blog`;if(e.error?.errors){let p=Object.keys(e.error.errors);p.length>0&&(l=e.error.errors[p[0]][0])}this.message={text:l,type:"error"},this.isSubmitting=!1,this.blogForm.enable(),window.scrollTo({top:0,behavior:"smooth"}),this.ngxSpinnerService.hide("actionsLoader"),setTimeout(()=>{this.message={text:"",type:""}},5e3)}})}static{this.\u0275fac=function(m){return new(m||n)(V(Z))}}static{this.\u0275cmp=N({type:n,selectors:[["app-add-edit-arabic-blogs"]],standalone:!0,features:[z([]),k],decls:87,vars:51,consts:[["name","actionsLoader","bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","square-spin",3,"fullScreen"],[2,"color","white"],[1,"card"],[1,"card-title"],[1,"blog-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"section-title"],[1,"form-row"],[1,"form-field"],["for","ar_blog_title",1,"field-label"],[1,"input-container"],["pInputText","","id","ar_blog_title","formControlName","ar_blog_title","placeholder","Enter Arabic Blog Title",3,"ngClass","disabled"],[1,"error-container"],[1,"error-message"],["for","ar_blog_text",1,"field-label"],["dir","rtl","formControlName","ar_blog_text",1,"rich-text-content",3,"options","ngClass"],["for","ar_meta_title",1,"field-label"],["pInputText","","id","ar_meta_title","formControlName","ar_meta_title","placeholder","Enter Arabic Meta Title",3,"ngClass","disabled"],["for","ar_meta_text",1,"field-label"],["pInputTextarea","","id","ar_meta_text","formControlName","ar_meta_text","rows","7","placeholder","Enter Arabic Meta Description",3,"ngClass","disabled"],["for","ar_first_script_text",1,"field-label"],["pInputTextarea","","id","ar_first_script_text","formControlName","ar_first_script_text","rows","7","placeholder","Enter Arabic First Script Text",3,"ngClass","disabled"],["for","ar_second_script_text",1,"field-label"],["pInputTextarea","","id","ar_second_script_text","formControlName","ar_second_script_text","rows","7","placeholder","Enter Arabic Second Script Text",3,"ngClass","disabled"],[1,"form-row","flex","items-center"],["class","form-field",4,"ngIf"],["for","active_status",1,"field-label"],[1,"status-container"],["id","active_status","formControlName","active_status",3,"onChange","trueValue","falseValue","disabled"],[1,"status-label"],[1,"field-label"],[3,"imagesChanged","initialImages","singleImageMode","id"],[1,"flex","justify-between","items-center"],["type","button","label","Cancel","styleClass","p-button-text p-button-secondary",3,"routerLink","disabled"],["type","submit",1,"btn-main",3,"disabled"],["role","alert",1,"border","px-4","py-3","rounded","relative","mb-4",3,"ngClass"],["for","blog_date",1,"field-label"],["type","date","pInputText","","id","blog_date","formControlName","blog_date",3,"min","ngClass","disabled"],[1,"font-bold"],[1,"block","sm:inline","ml-2"]],template:function(m,e){if(m&1&&(t(0,"ngx-spinner",0)(1,"p",1),a(2,"Loading..."),i()(),t(3,"div",2)(4,"h2",3),a(5),i(),t(6,"form",4),P("ngSubmit",function(){return e.onSubmit()}),t(7,"div",5)(8,"h3",6),a(9,"Blog Title"),i(),t(10,"div",7)(11,"div",8)(12,"label",9),a(13,"Arabic Blog Title"),i(),t(14,"div",10),_(15,"input",11),i(),t(16,"div",12),c(17,xe,2,0,"small",13),i()()()(),t(18,"div",5)(19,"h3",6),a(20,"Blog Content"),i(),t(21,"div",7)(22,"div",8)(23,"label",14),a(24,"Arabic Blog Content"),i(),_(25,"ngx-jodit",15),t(26,"div",12),c(27,Ce,2,0,"small",13),i()()()(),t(28,"div",5)(29,"h3",6),a(30,"Meta Information"),i(),t(31,"div",7)(32,"div",8)(33,"label",16),a(34,"Arabic Meta Title"),i(),t(35,"div",10),_(36,"input",17),i(),t(37,"div",12),c(38,Ee,2,0,"small",13),i()()(),t(39,"div",7)(40,"div",8)(41,"label",18),a(42,"Arabic Meta Description"),i(),_(43,"textarea",19),t(44,"div",12),c(45,Fe,2,0,"small",13),i()()()(),t(46,"div",5)(47,"h3",6),a(48,"Script Text"),i(),t(49,"div",7)(50,"div",8)(51,"label",20),a(52,"Arabic First Script Text"),i(),_(53,"textarea",21),t(54,"div",12),c(55,Ae,2,0,"small",13),i()(),t(56,"div",8)(57,"label",22),a(58,"Arabic Second Script Text"),i(),_(59,"textarea",23),t(60,"div",12),c(61,Me,2,0,"small",13),i()()()(),t(62,"div",5)(63,"h3",6),a(64,"Additional Details"),i(),t(65,"div",24),c(66,Te,8,7,"div",25),t(67,"div",8)(68,"label",26),a(69,"Status"),i(),t(70,"div",27)(71,"p-inputSwitch",28),P("onChange",function(p){return e.onActiveStatusChange(p)}),i(),t(72,"span",29),a(73),i()(),t(74,"div",12),c(75,we,2,0,"small",13),i()()(),t(76,"div",8)(77,"label",30),a(78,"Main Image"),i(),t(79,"app-image-upload",31),P("imagesChanged",function(p){return e.onImagesChanged(p)}),i(),t(80,"div",12),c(81,Be,2,0,"small",13),i()()(),t(82,"div",32),_(83,"p-button",33),t(84,"button",34),a(85),i()()()(),c(86,Pe,5,6,"div",35)),m&2){let l,p,S,x,C,E,F,A,M,I,y,T,D,w,B;s("fullScreen",!0),r(5),v(e.isEditMode?"Edit Arabic Blog":"Add New Arabic Blog"),r(),s("formGroup",e.blogForm),r(9),s("ngClass",b(37,h,((l=e.blogForm.get("ar_blog_title"))==null?null:l.touched)&&((l=e.blogForm.get("ar_blog_title"))==null?null:l.invalid)))("disabled",e.isSubmitting),r(2),u(17,(p=e.blogForm.get("ar_blog_title"))!=null&&p.touched&&((p=e.blogForm.get("ar_blog_title"))!=null&&p.hasError("required"))?17:-1),r(8),s("options",q(39,fe))("ngClass",b(40,h,((S=e.blogForm.get("ar_blog_text"))==null?null:S.touched)&&((S=e.blogForm.get("ar_blog_text"))==null?null:S.invalid))),L("disabled",e.isSubmitting?!0:null),r(2),u(27,(x=e.blogForm.get("ar_blog_text"))!=null&&x.touched&&((x=e.blogForm.get("ar_blog_text"))!=null&&x.hasError("required"))?27:-1),r(9),s("ngClass",b(42,h,((C=e.blogForm.get("ar_meta_title"))==null?null:C.touched)&&((C=e.blogForm.get("ar_meta_title"))==null?null:C.invalid)))("disabled",e.isSubmitting),r(2),u(38,(E=e.blogForm.get("ar_meta_title"))!=null&&E.touched&&((E=e.blogForm.get("ar_meta_title"))!=null&&E.hasError("required"))?38:-1),r(5),s("ngClass",b(44,h,((F=e.blogForm.get("ar_meta_text"))==null?null:F.touched)&&((F=e.blogForm.get("ar_meta_text"))==null?null:F.invalid)))("disabled",e.isSubmitting),r(2),u(45,(A=e.blogForm.get("ar_meta_text"))!=null&&A.touched&&((A=e.blogForm.get("ar_meta_text"))!=null&&A.hasError("required"))?45:-1),r(8),s("ngClass",b(46,h,((M=e.blogForm.get("ar_first_script_text"))==null?null:M.touched)&&((M=e.blogForm.get("ar_first_script_text"))==null?null:M.invalid)))("disabled",e.isSubmitting),r(2),u(55,(I=e.blogForm.get("ar_first_script_text"))!=null&&I.touched&&((I=e.blogForm.get("ar_first_script_text"))!=null&&I.hasError("required"))?55:-1),r(4),s("ngClass",b(48,h,((y=e.blogForm.get("ar_second_script_text"))==null?null:y.touched)&&((y=e.blogForm.get("ar_second_script_text"))==null?null:y.invalid)))("disabled",e.isSubmitting),r(2),u(61,(T=e.blogForm.get("ar_second_script_text"))!=null&&T.touched&&((T=e.blogForm.get("ar_second_script_text"))!=null&&T.hasError("required"))?61:-1),r(5),s("ngIf",!e.isEditMode),r(5),s("trueValue",!0)("falseValue",!1)("disabled",e.isSubmitting),r(2),v(((D=e.blogForm.get("active_status"))==null?null:D.value)===!0?"Active":"Inactive"),r(2),u(75,(w=e.blogForm.get("active_status"))!=null&&w.touched&&((w=e.blogForm.get("active_status"))!=null&&w.hasError("required"))?75:-1),r(4),s("initialImages",e.initialImages)("singleImageMode",!0)("id","main"),r(2),u(81,(B=e.blogForm.get("main_image"))!=null&&B.touched&&((B=e.blogForm.get("main_image"))!=null&&B.hasError("required"))?81:-1),r(2),s("routerLink",q(50,ve))("disabled",e.isSubmitting),r(),s("disabled",e.blogForm.invalid||e.isSubmitting),r(),v(e.isEditMode?e.isSubmitting?"Updating...":"Update Blog":e.isSubmitting?"Creating...":"Create Blog"),r(),u(86,e.message.text?86:-1)}},dependencies:[le,ne,ee,te,ie,oe,ae,de,se,ge,me,he,be,X,W,J,j,G,R,ue,ce,_e,pe],styles:['@charset "UTF-8";.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 4px 6px #0000001a;padding:2rem;max-width:1200px;margin:2rem auto}.card-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;color:#1a202c;margin-bottom:1.5rem}.blog-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.form-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;color:#2d3748;border-bottom:1px solid #e2e8f0;padding-bottom:.5rem}.form-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem}.form-field[_ngcontent-%COMP%]{flex:1;min-width:280px;display:flex;flex-direction:column;gap:.5rem}.field-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:#4a5568}.input-container[_ngcontent-%COMP%]{position:relative}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:4px;font-size:1rem;color:#1a202c;transition:border-color .2s,box-shadow .2s}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3182ce;box-shadow:0 0 0 3px #3182ce1a}.input-container[_ngcontent-%COMP%]   input.p-invalid[_ngcontent-%COMP%]{border-color:#e53e3e}.rich-text-content[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:4px;transition:border-color .2s}.rich-text-content.p-invalid[_ngcontent-%COMP%]{border-color:#e53e3e}.error-container[_ngcontent-%COMP%]{min-height:1.5rem}.error-message[_ngcontent-%COMP%]{color:#e53e3e;font-size:.85rem}.status-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.status-label[_ngcontent-%COMP%]{font-size:.9rem;color:#4a5568}app-image-upload[_ngcontent-%COMP%]{width:100%}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem}.p-button.btn-main[_ngcontent-%COMP%]{background:#3182ce;border:none;padding:.75rem 1.5rem;font-weight:500;transition:background .2s}.p-button.btn-main[_ngcontent-%COMP%]:hover{background:#2b6cb0}.p-button.p-button-secondary[_ngcontent-%COMP%]{color:#718096;font-weight:500}.p-button.p-button-secondary[_ngcontent-%COMP%]:hover{color:#2d3748}@media (max-width: 768px){.card[_ngcontent-%COMP%]{padding:1.5rem;margin:1rem}.form-row[_ngcontent-%COMP%]{flex-direction:column}.form-field[_ngcontent-%COMP%]{min-width:100%}.card-title[_ngcontent-%COMP%]{font-size:1.5rem}.section-title[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 480px){.card[_ngcontent-%COMP%]{padding:1rem;margin:.5rem}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.p-button[_ngcontent-%COMP%]{width:100%;text-align:center}}textarea[_ngcontent-%COMP%]{resize:none}']})}}return n})();export{nt as AddEditArabicBlogsComponent};
